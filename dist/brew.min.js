!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("zeta-dom"),require("jQuery"),require("promise-polyfill"),require("waterpipe")):"function"==typeof define&&define.amd?define("brew",["zeta-dom","jQuery","promise-polyfill","waterpipe"],e):"object"==typeof exports?exports.brew=e(require("zeta-dom"),require("jQuery"),require("promise-polyfill"),require("waterpipe")):t.brew=e(t.zeta,t.jQuery,t["promise-polyfill"],t.waterpipe)}(self,(function(t,e,n,r){return function(){var o={860:function(t,e,n){var r=window.jQuery||n(609);t.exports=r},424:function(t,e,n){var r=window.Promise||n(804).default;t.exports=r},256:function(t,e,n){var r=window.waterpipe||n(160);t.exports=r;var o=r;o.pipes["{"]=function(t,e){var n=e.globals,r=n.new,o={};for(n.new=o;e.hasArgs();){var i=e.raw();if("}"===i)break;o[String(i).replace(/:$/,"")]=e.next()}return n.new=r,o},o.pipes["{"].varargs=!0},344:function(t,e,n){"use strict";n.d(e,{default:function(){return Fn}});var r={};n.r(r),n.d(r,{baseUrl:function(){return ut},combinePath:function(){return lt},isSubPathOf:function(){return dt},normalizePath:function(){return st},setBaseUrl:function(){return ct},toAbsoluteUrl:function(){return pt},toRelativeUrl:function(){return ht},withBaseUrl:function(){return ft}});var o={};n.r(o),n.d(o,{addStyleSheet:function(){return Zt},api:function(){return Bt},cookie:function(){return Qt},copyAttr:function(){return zt},deleteCookie:function(){return Jt},getAttrValues:function(){return Lt},getCookie:function(){return _t},getFormValues:function(){return Ft},getJSON:function(){return Gt},getQueryParam:function(){return Wt},loadScript:function(){return Kt},preloadImages:function(){return Xt},setAttr:function(){return Dt},setCookie:function(){return Ht}});var i={};n.r(i),n.d(i,{addAnimateIn:function(){return se},addAnimateOut:function(){return fe},animateIn:function(){return ce},animateOut:function(){return le}});var a={};n.r(a),n.d(a,{addAsyncAction:function(){return Nn},closeFlyout:function(){return Mn},openFlyout:function(){return Rn}});var u=n(163),c=u.util,l=c.noop,s=c.either,f=c.is,p=(c.isUndefinedOrNull,c.isArray),h=c.isFunction,d=c.isThenable,g=c.isPlainObject,m=(c.isArrayLike,c.makeArray),v=c.extend,b=c.each,y=c.map,w=c.grep,x=(c.splice,c.any),S=c.single,A=c.kv,O=c.pick,P=c.exclude,k=c.mapGet,T=c.mapRemove,j=(c.setAdd,c.equal),I=c.createPrivateStore,C=c.setTimeoutOnce,E=c.setImmediate,N=c.setImmediateOnce,M=c.throwNotFunction,R=c.keys,$=c.values,V=c.hasOwnProperty,q=(c.getOwnPropertyDescriptors,c.define),U=c.definePrototype,L=c.defineOwnProperty,D=c.defineGetterProperty,z=c.defineHiddenProperty,F=c.defineAliasProperty,W=c.defineObservableProperty,_=c.watch,H=c.watchOnce,J=c.watchable,Q=(c.inherit,c.deepFreeze),B=c.iequal,G=c.randomId,K=(c.repeat,c.camel),Z=(c.hyphenate,c.ucfirst,c.lcfirst,c.trim),X=c.matchWord,Y=c.htmlDecode,tt=c.resolve,et=c.reject,nt=c.always,rt=c.resolveAll,ot=c.catchAsync,it=c.setPromiseTimeout,at={http:80,https:443},ut="/";function ct(t){ut=st(t,!0)}function lt(t,e){return t=st(t),e=st(e),"/"===t?e:"/"===e?t:t+e}function st(t,e){if(null==t)return"/";if(/(:\/\/)|\?|#/.test(t)){var n=document.createElement("a");return n.href=t,(RegExp.$1&&(n.origin||n.protocol+"//"+n.hostname+(n.port&&+n.port!==at[n.protocol.slice(0,-1)]?":"+n.port:"")))+st(n.pathname,e)+n.search+n.hash}if(t=String(t).replace(/\/+(\/|$)/g,"$1"),e&&t.indexOf("./")>=0){for(var r=t.split("/"),o=0;o<r.length;)"."===r[o]||".."===r[o]&&!o?r.splice(o,1):".."===r[o]?r.splice(--o,2):o++;t=r.join("/")}return"/"===t[0]?t:"/"+t}function ft(t){return t=st(t),ut&&"/"===t[0]&&!dt(t,ut)?lt(ut,t):t}function pt(t){return t.indexOf("://")>0?t:location.origin+ft(t)}function ht(t){return t.substr(0,location.origin.length)===location.origin?t.substr(location.origin.length):t}function dt(t,e){var n=e.length;return t.substr(0,n)===e&&(!t[n]||"/"===t[n]||"/"===e[n-1])}var gt=n(860),mt=n(424),vt=u.css,bt=vt.parseCSS,yt=vt.isCssUrlValue,wt=vt.runCSSTransition,xt=u.util,St=(xt.domReady,xt.tagName,xt.is,xt.isVisible),At=xt.matchSelector,Ot=(xt.comparePosition,xt.connected,xt.containsOrEquals),Pt=(xt.acceptNode,xt.combineNodeFilters,xt.iterateNode),kt=(xt.iterateNodeToArray,xt.getCommonAncestor,xt.parentsAndSelf,xt.selectIncludeSelf),Tt=xt.selectClosestRelative,jt=xt.createNodeIterator,It=(xt.createTreeWalker,xt.bind),Ct=xt.bindUntil,Et=xt.dispatchDOMMouseEvent,Nt=(xt.removeNode,xt.getClass),Mt=xt.setClass,Rt=(xt.getScrollOffset,xt.getScrollParent,xt.getContentRect,xt.scrollBy,xt.scrollIntoView),$t=(xt.createRange,xt.rangeIntersects,xt.rangeEquals,xt.rangeCovers,xt.compareRangePosition,xt.makeSelection,xt.getRect),Vt=(xt.getRects,xt.toPlainRect,xt.rectEquals,xt.rectCovers,xt.rectIntersects),qt=(xt.pointInRect,xt.mergeRect,xt.elementFromPoint,{}),Ut={};function Lt(t){var e={};return b(t.attributes,(function(t,n){e[n.name]=n.value})),e}function Dt(t,e,n){b(g(e)||A(e,n),(function(e,n){t.setAttribute(e,n)}))}function zt(t,e){b(t.attributes,(function(t,n){e.setAttribute(n.name,n.value)}))}function Ft(t){var e={};return b(t.elements,(function(n,r){if(r.name&&!(r.name in e)){var o=t.elements[r.name];D(e,r.name,(function(){return"checkbox"===o.type?o.checked:o.value}))}})),e}function Wt(t){return new RegExp("[?&]"+t+"=([^&]+)","i").test(location.search)&&decodeURIComponent(RegExp.$1)}function _t(t){return new RegExp("(?:^|\\s|;)"+t+"=([^;]+)").test(document.cookie)&&RegExp.$1}function Ht(t,e,n){return document.cookie=t+"="+e+";path=/"+(n?";expires="+new Date(Date.now()+n).toGMTString():""),e}function Jt(t){document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT"}function Qt(t,e){return{get:function(){return _t(t)},set:function(n){return Ht(t,n,e)},delete:function(){return Jt(t)}}}function Bt(t,e){var n="get post delete";if("string"==typeof t&&X(t,n))return Bt(e=v({},"string"==typeof e?{baseUrl:e}:e,{methods:t}))[t];var r={baseUrl:(t=v({},t)).baseUrl,token:t.token};return b(t.methods||n,(function(e,o){X(o,n)&&(z(r,o,(function e(n,i){if(!r.baseUrl)return H(r,"baseUrl",(function(){return e(n,i)}));var a={"Content-Type":"application/json"};return r.token&&(a.Authorization="Bearer "+r.token),gt.ajax({method:o,url:lt(r.baseUrl,n),headers:a,dataType:"json",data:JSON.stringify(i||{}),success:function(e){h(t.getTokenFromResponse)&&(r.token=t.getTokenFromResponse(e,r.token))}}).catch((function(t){if(0===t.status)throw"network-failed";var e=t.responseJSON;if(e)throw console.error(n+":",e.error||e.message),e.error||e.message;throw t.statusText}))})),F(r[o],"baseUrl",r),F(r[o],"token",r))})),r}function Gt(t){return gt.getJSON(ft(t))}function Kt(t,e){return p(t)?t.reduce((function(t,n){return t.then((function(){return Kt(n,e)}))}),tt()):(Ut[t]||(Ut[t]=new mt((function(n,r){var o=document.createElement("script");if((e=e||{}).nomodule){if("noModule"in o)return void n();o.setAttribute("nomodule","")}e.module&&o.setAttribute("type","module"),o.addEventListener("load",(function(){n({})})),o.addEventListener("error",(function(){r()})),o.src=ft(t),document.head.appendChild(o)}))),Ut[t])}function Zt(t,e){var n=document.createElement("link");n.rel="stylesheet",n.href=ft(t),e&&(n.media=e),document.head.appendChild(n)}function Xt(t,e){if(!p(t)){var n={},r=function(t){yt(t)&&(n[RegExp.$1||RegExp.$2||RegExp.$3]=!0)};Pt(jt(t,1),(function(t){At(t,"img")&&t.src&&(n[t.src]=!0),r(getComputedStyle(t).backgroundImage),r(getComputedStyle(t,"::before").backgroundImage),r(getComputedStyle(t,"::after").backgroundImage)})),t=R(n)}var o=[],i=[];return t.forEach((function(t){o.push(qt[t]||(qt[t]=new mt((function(e){i.push(t),gt("<img>").on("load error",(function(){qt[t]=!0,e()})).attr("src",t)}))))})),!o.length||o.every((function(t){return!0===t}))?tt():(i.length&&console.log("Preload image",{urls:i}),it(rt($(qt)),e,!0))}var Yt=u.dom,te=u.dom,ee=(te.textInputAllowed,te.beginDrag,te.beginPinchZoom,te.getShortcut,te.setShortcut,te.focusable,te.focused,te.setModal,te.retainFocus,te.releaseFocus,te.focus,Yt),ne={},re={},oe=new Map,ie=0;function ae(t,e,n,r){if(!n.length)return tt();var o,i,a,u=++ie;n=n.map((function(t){return t instanceof mt?ot(t):new mt((function(e){t.then(e,e)}))})),ot(rt(n,(function(){clearTimeout(o),a(),oe.delete(t),console.log("Animation #%i completed",u)}))),n.push(new mt((function(t,e){a=t,i=e}))),o=setTimeout((function(){i("Animation #"+u+" timed out"),console.log("Animation #%i might take longer than expected",u,n),oe.delete(t)}),1500);var c=ot(rt(n));return console.log("Animation #%i triggered on %s",u,r,{elements:e}),oe.set(t,c),c}function ue(t,e,n,r){var o=[wt(t,e),ee.emit(n,t)],i=parseFloat(gt(t).css("transition-delay"));return b(r,(function(e,n){if(t.attributes[e]){var r=t.getAttribute(e);o.push(new mt((function(e,o){setTimeout((function(){rt(n(t,r)).then(e,o)}),1e3*i)})))}})),rt(o,(function(){return t}))}function ce(t,e,n,r){if(oe.has(t))return oe.get(t).then((function(){return ce(t,e,n,r)}));r=r||function(){return!0},ee.emit("animationstart",t,{animationType:"in",animationTrigger:e},!0);var o=n?gt(n,t):gt(),i="show"===e?':not([animate-on]), [animate-on~="'+e+'"]':'[animate-on~="'+e+'"]',a=[],u=[];return gt(kt("[animate-in]",t)).filter(i).each((function(t,e){!o.find(e)[0]&&r(e)&&St(e)&&(a.push(e),u.push(ue(e,"tweening-in","animatein",ne)))})),gt(kt("[animate-sequence]",t)).filter(i).each((function(t,e){if(!o.find(e)[0]&&r(e)&&St(e)){var n=e.getAttribute("animate-sequence")||"",i=e.getAttribute("animate-sequence-type")||"",c=gt(e).find(">"===n[0]?n:gt(n));void 0!==gt(e).attr("animate-sequence-reverse")&&[].reverse.apply(c),c.css("transition-duration","0s"),c.attr("animate-in",i).attr("is-animate-sequence",""),c.each((function(t,e){"inline"===gt(e).css("display")&&gt(e).css("display","inline-block"),a.push(e),u.push(new mt((function(n,r){setTimeout((function(){gt(e).css("transition-duration",""),ue(e,"tweening-in","animatein",ne).then(n,r)}),50*t)})))})),e.attributes["animate-in"]||gt(e).attr("animate-in","").addClass("tweening-in")}})),ae(t,a,u,e).then((function(){ee.emit("animationcomplete",t,{animationType:"in",animationTrigger:e},!0)}))}function le(t,e,n,r,o){r=r||function(){return!0},ee.emit("animationstart",t,{animationType:"out",animationTrigger:e},!0);var i=n?gt(n,t):gt(),a="show"===e?':not([animate-on]), [animate-on~="'+e+'"]':'[animate-on~="'+e+'"]',u=[],c=[];return gt((o?gt:kt)("[animate-out]",t)).filter(a).each((function(t,e){!i.find(e)[0]&&r(e)&&(u.push(e),c.push(ue(e,"tweening-out","animateout",re)))})),ae(t,u,c,e).then((function(){var n=gt((o?gt:kt)("[animate-out], .tweening-in, .tweening-out",t));"show"!==e&&(n=n.filter(a)),(n=n.filter((function(t,e){return r(e)}))).removeClass("tweening-in tweening-out"),n.find("[is-animate-sequence]").removeAttr("animate-in").removeClass("tweening-in tweening-out"),ee.emit("animationcomplete",t,{animationType:"out",animationTrigger:e},!0)}))}function se(t,e){ne[t]=M(e)}function fe(t,e){re[t]=M(e)}var pe=n(256),he={};function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){return"["+t+"] "+(e=m(e).map((function(t){return f(t,Element)?(n=t).tagName.toLowerCase()+(n.id?"#"+n.id:n.className.trim()&&n.className.replace(/^\s*|\s+(?=\S)/g,"."))+":":t&&"object"===de(t)?(e=JSON.stringify(t),'[{"]'.indexOf(e[0])>=0&&e.length>200?e[0]+e.substr(1,199)+"…"+e[e.length-1]:e):t;var e,n})).join(" "))}function me(t,e,n){var r;try{console.groupCollapsed(ge(t,e)),r=!0}catch(t){}try{n(console)}finally{if(r)try{console.groupEnd()}catch(t){}}}var ve,be=I(),ye=new Map,we={},xe=[],Se=ee.root,Ae=[Se];function Oe(t,e){var n=gt(t).closest("[match-path]")[0];return!n||(e||Ae).indexOf(n)>=0}function Pe(t,e,n){return t&&t.test||(t=Te(t)),p(e)||(e=ke(e)),t.test(e,n)}function ke(t){return"/"===(t=st(t))?[]:t.slice(1).split("/")}function Te(t){if(t=String(t),!we[t]){var e,n=[],r={};t.replace(/\/(\*|[^{][^\/]*|\{([a.-z_$][a-z0-9_$]*)(\?)?(?::(?![*+?])((?:(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])([*+?]|\{\d+(?:,\d+)\})?)+))?\})(?=\/|$)/gi,(function(t,o,i,a,u){a&&!e&&(e=n.length),i&&(r[i]=n.length),n.push(i?{name:i,pattern:u?new RegExp("^"+u+"$","i"):/./}:o.toLowerCase())})),q(n,{value:t,params:r,exact:!("*"===n[n.length-1]&&n.splice(-1)),minLength:e||n.length,test:function(t,e){return t.length>=n.minLength&&(e||!n.exact||t.length<=n.length)&&!x(n,(function(e,n){return t[n]&&!(e.name?e.pattern.test(t[n]):B(t[n],e))}))}}),we[t]=n}return we[t]}function je(t,e,n){return{route:t=t||[],params:P(n,["remainingSegments"]),minPath:st(e.slice(0,t.minLength).join("/")),maxPath:st(e.slice(0,t.length).join("/"))}}function Ie(t,e,n){var r=this,o=be(r,{routes:e.map(Te)});b(o.routes,(function(t,e){b(e.params,(function(t){r[t]=null}))})),v(r,r.parse(n)),o.current=o.lastMatch,o.handleChanges=_(r,!0),Object.preventExtensions(r),Object.getOwnPropertyNames(r).forEach((function(t){W(r,t)})),_(r,(function(){var e=P(r,["remainingSegments"]),n=o.current,i=!j(e,o.current.params);if(i&&o.lastMatch&&(o.current=o.lastMatch,o.lastMatch=null,i=!j(e,o.current.params)),i){var a,u,c=[],l=x(o.routes,(function(t){for(a in e)if(e[a]&&!(a in t.params))return!1;for(c.length=0,a=0,u=t.length;a<u;a++){var n=t[a].name;if(n&&!t[a].pattern.test(e[n]||""))return!1;c[a]=n?e[n]:t[a]}return!0}));l?(o.current=je(l,c,r),t.path=r.toString()):n&&(o.current=n,r.set(n.params))}o.current.route.exact&&"/"!==r.remainingSegments&&(r.remainingSegments="/")}))}U(Ie,{parse:function(t){var e=be(this),n=ke(t),r=x(e.routes,(function(t){return Pe(t,n,!0)})),o={};if(r){for(var i in this)o[i]=n[r.params[i]]||null;o.remainingSegments=r.exact?"/":st(n.slice(r.length).join("/"))}return e.lastMatch=je(r,n,o),o},set:function(t){var e=this;if("string"==typeof t){if(B(t,e.toString()))return;t=e.parse(t)}be(e).handleChanges((function(){v(e,t)}))},toString:function(){return lt(be(this).current.maxPath||"/",this.remainingSegments)}}),J(Ie.prototype),gn("router",(function(t,e){!function(t,e){var n,r,o=t.path||e.initialPath||e.queryParam&&Wt(e.queryParam)||location.pathname.substr(e.baseUrl.length)||"/",i=new Ie(t,e.routes,o),a="",u={},c={},s=-1,f=[];function p(t,e,n,r){return Object.freeze({id:t,path:e,navigated:!1!==r,redirected:!!n,originalPath:n||null})}function h(t,e){for(var n=s;n>=0;n--)if(f[n].result&&f[n].path===t)return history.replaceState(history.state,"",ft(t)),p(f[n].result,t,e,!1)}function d(e,n){var o=f[s];if(e=m(e),o&&e===o.path&&e===r)return o.result?{promise:tt(h(e))}:o;s=Math.max(0,s+!n);var i,a,u=G(),c=l,d=l,g=f.splice(s),v={id:u,path:e,result:"",get promise(){return i||(i=new Promise((function(t,e){var n=function(t){return function(e){a=!0,t(e)}};a=!1,c=n(t),d=n(e)})))},reset:function(){return a&&(i=null),v},forward:function(t){i&&!a&&((t.promise||t.then((function(t){return t.promise}))).then((function(t){v.resolve(p(t.id,t.path,e))}),d),d=l)},resolve:function(t){t=t||p(u,e),v.path=t.path,v.result=v.result||t.id,c(t),b(f,(function(t,e){e.reject()}))},reject:function(){d("cancelled")}};return f[s]=v,history[n?"replaceState":"pushState"](u,"",ft(e)),t.path=e,n&&!g[1]?g[0].forward(v):E((function(){b(g,(function(t,e){e.reject()}))})),v}function g(){return history.back(),--s}function m(e,n){var r;return e=decodeURI(e),n=n||t.path,("~"===e[0]||e.indexOf("{")>=0)&&(r=B(n,i.toString())?be(i).current:i.parse(n)&&be(i).lastMatch,e=e.replace(/\{([^}?]+)(\??)\}/g,(function(t,n,o,i){return r.params[n]||(o&&i+t.length===e.length?"":"null")}))),"~"===e[0]?e=lt(r.minPath,e.slice(1)):"/"!==e[0]&&(e=lt(n,e)),st(e,!0)}function y(t){gt("[match-path]",t).each((function(t,e){if(!ye.has(e)){var n=document.createElement("div");n.setAttribute("style","display: none !important"),n.setAttribute("match-path",e.getAttribute("match-path")||""),e.attributes.default&&n.setAttribute("default",""),gt(e).before(n),gt(e).detach(),Mt(e,"hidden",!0),ye.set(n,e),ye.set(e,e)}}))}function w(e,n,r){var o=f[s],i=new Map,a=ee.eventSource,u=Ae.slice(0);Ae=r,ve=gt(r).filter("[page-title]")[0],c={},document.title=ve?jn(ve,"page-title",!0):document.title,Ze(!0,(function(){me(a,["pageenter",e],(function(){ye.forEach((function(r,o){var c=Ae.indexOf(r)>=0;if(r!==o&&c===u.indexOf(r)<0)if(c){Pn(r,!1),An(r);var l=i.get(gt(r).parents("[match-path]")[0]),s=ke(r.getAttribute("match-path")),f=xe.map((function(t){if(Pe(t.route,s))return t.callback(r,e)}));f.push(l),i.set(r,rt(f,(function(){Ae.indexOf(r)>=0&&(Mt(r,"hidden",!1),ce(r,"show","[match-path]"),t.emit("pageenter",r,{pathname:e},!0))})))}else t.emit("pageleave",r,{pathname:n},!0),le(r,"show","[match-path]").then((function(){Ae.indexOf(r)<0&&me(a,["pageleave",n],(function(){Mt(r,"hidden",!0),Pn(r,!0)}))}))}))})),b(i,(function(t,e){Be(e,t)})),nt(rt(i),(function(){o.resolve()}))}))}function x(){var e=f[s];if(e&&location.pathname===ft(r)||(d(r),e=f[s]),s>0&&r===a)e.resolve(h(r));else{if(ee.locked(ee.activeElement,!0))return n=r===n?null:a,g(),void e.reject();var o=Ye(),u=r;if(o)return n=a,o=tt(o).then((function(){return d(u)})),g(),void e.forward(o);n=null;var l,p=[Se],x=a;y(),Ze(!0,(function(){for(var t,e=gt('[switch=""]').get();t=e.shift();)if(Oe(t,p)){var n=gt(t).children("[match-path]").get().map((function(t){var e=k(ye,t)||t,n=gt('[switch=""]',e).get(),o=m(e.getAttribute("match-path"),r);return{element:e,path:o.replace(/\/\*$/,""),exact:!n[0]&&"/*"!==o.slice(-2),placeholder:t!==e&&t,children:n}}));n.sort((function(t,e){return e.path.localeCompare(t.path)}));var o=S(n,(function(t){return(t.exact?r===t.path:dt(r,t.path))&&t.path}));b(n,(function(t,n){if(n.path===o){var r=n.element;p.unshift(r),n.placeholder&&(gt(n.placeholder).replaceWith(r),Ge(r),Xe(r),e.push.apply(e,n.children))}}))}})),c[r]&&c[x]?w(r,x,p):(c[r]=!0,gt('[switch=""]').each((function(t,e){if(Oe(e,p)){var n=gt(e).children("[match-path]");if(!n.filter((function(t,e){return p.indexOf(e)>=0}))[0])return l=(n.filter("[default]")[0]||n[0]).getAttribute("match-path"),!1}})),l&&l!==r?l===a?e.resolve(h(l,r)):e.forward(d(l,!0)):(console.log("Nagivate",r),a=r,t.path=r,i.set(r),Be(o=tt(t.emit("navigate",{pathname:r,oldPathname:x,route:Object.freeze(v({},i))})),Se,(function(){f[s]===e&&w(r,x,p)}))))}}_(u,!0),W(u,"path","",(function(t){return on?((r=m(t,a))!==a&&N(x),a):a})),ct(e.baseUrl||""),t.define({get canNavigateBack(){return s>0},get previousPath(){return(f[s-1]||"").path||null},resolvePath:m,navigate:function(t,e){return d(t,e).promise},back:function(t){return s>0?f[g()].reset().promise:!!t&&d(t).promise}}),L(t,"initialPath",o,!0),L(t,"route",i,!0),F(t,"path",u),t.beforeInit((function(){ee.ready.then((function(){y(),It(window,"popstate",(function(){var t=S(f,(function(t,e){return t.id===history.state&&e+1}));t?(r=f[s=t-1].reset().path,N(x)):d(location.pathname.substr(ut.length-1)||"/")}))}))})),t.on("ready",(function(){d(o)})),t.on("pageenter",(function(t){gt(kt("[x-autoplay]",t.target)).each((function(t,e){Oe(e)&&(0!==e.readyState&&(e.currentTime=0),e.play())}))})),t.on("pageleave",(function(e){gt(kt("form",e.target)).each((function(e,n){t.emit("reset",n,null,!1)||n.reset()})),gt(kt("[x-autoplay]",e.target)).each((function(t,e){e.pause()}))})),t.on("statechange",(function(t){Ot(t.target,ve)&&(document.title=jn(ve,"page-title",!0))})),ee.watchElements(Se,"video[autoplay], audio[autoplay]",(function(t){gt(t).attr("x-autoplay","").removeAttr("autoplay")}),!0)}(t,e||{})})),we["/*"]={value:"/*",exact:!1,length:0,minLength:0,params:{},test:function(){return!0}};var Ce="background-image".split(" "),Ee="checked selected disabled readonly multiple ismap",Ne=I(),Me=ee.root,Re=new Set,$e=new Map,Ve=[],qe=[],Ue=[],Le={},De={},ze={},Fe=0,We=!1;function _e(t,e){var n=Ne(e)||Ne(e,{});return n[t]||(n[t]={})}function He(t,e,n){b(e,(function(e,n){"$$class"===e?Mt(t,n):"$$text"===e?t.textContent=n:"style"===e?gt(t).css(n):X(e,Ee)?t[e]=!!n:t.setAttribute(e,n)})),n||ee.emit("domchange",t)}function Je(t,e){b(e,(function(e,n){t[e]="$$class"===e||"style"===e?v({},t[e],n):n}))}function Qe(t,e){var n,r=new Set;do{t=w(m(t),(function(t){return Ot(Me,t)})),n=m(r),gt(kt("["+R(Le).join("],[")+"]",t)).not(n).each((function(t,n){b(Le,(function(t,o){n.attributes[t]&&(o(n,_e.bind(0,t),e),r.add(n))}))}))}while(n.length!==r.size)}function Be(t,e,n){if(!d(t))return tt((n||l)());if(e||"script"!==ee.eventSource){var r=Sn("loading",(e=e||ee.activeElement)||Me),o=Sn("error",e||Me),i=_e("handleAsync",r);An(r,{loading:kn(r,"loading")||!0}),An(o,{error:null}),i.value=(i.value||0)+1,t.then((function(){An(r,{loading:!!--i.value})}),(function(t){An(r,{loading:!!--i.value}),An(o,{error:""+(t.message||t)})}))}return t.then(n||null)}function Ge(t){Re.add(t)}function Ke(t){if(!Fe&&!We){var e=new Map,n=new Map,r=function(t,e){Je(k(n,t,Object),e)};We=!0;try{me(ee.eventSource,"statechange",(function(){Qe(Re,r);var t=gt.uniqueSort(w(Re,(function(t){return Ot(Me,t)&&Re.delete(t)})));b(t,(function(t,n){var r=_e("oldValues",n),o={},i={};for(b(kn(n,!0),(function(t,e){r[t]!==e&&(o[t]=r[t],i[t]=e,r[t]=e)})),e.set(n,{oldValues:o,newValues:i});n=n.parentNode;){var a=e.get(n);if(a)for(var u in a.newValues)u in i||(i[u]=a.newValues[u],o[u]=a.oldValues[u])}}));var n=[];b(t.reverse(),(function(t,o){me("statechange",[o,e.get(o).newValues],(function(t){t.log(o===Me?document:o),gt(kt("["+R(De).join("],[")+"]",o)).not(n).each((function(t,e){b(De,(function(t,n){e.attributes[t]&&n(e,_e.bind(0,t),r)})),n.push(e)}))}))}))})),rt(Ve.map((function(t){return t(n)}))).then((function(){var r=new Map;b(n,(function(n,o){if(t)$e.has(n)?Je($e.get(n),o):He(n,o);else{var i=gt(n).filter("[match-path]")[0]||gt(n).parents("[match-path]")[0]||Me,a=r.get(i);if(!a){var u=function(t){var n,r=t.getAttribute("animate-on-statechange");if(!r)return!0;for(;t&&!(n=e.get(t));t=t.parentNode);return n&&x(r,(function(t){return t in n.newValues}))};a=[],E((function(){le(i,"statechange","[match-path]",u,!0).then((function(){b(a,(function(t,e){He(e,T($e,e))})),ce(i,"statechange","[match-path]",u)}))})),r.set(i,a)}Je(k($e,n,Object),o),a.push(n)}})),b(e,(function(t,e){ee.emit("statechange",t,{data:kn(t),newValues:e.newValues,oldValues:e.oldValues},!0)}))}))}finally{We=!1}}}function Ze(t,e){var n=!0;try{Fe=(Fe||0)+1,M(e||t)()}catch(t){throw n=!1,t}finally{!--Fe&&n&&Ke(!0===t)}}function Xe(t){var e=We;We=!0;try{Qe(t,(function(t,e){He(t,e,!0)}))}finally{We=e}for(var n=[t],r=t===Me,o=-1,i=0;o<Ue.length;)b(Ue.slice(o<0?0:o),(function(e,r){gt(kt(r.target,t)).each((function(t,e){rn.on(e,r.handlers),r.handlers.mounted&&n.indexOf(e)<0&&n.push(e)}))})),o=Ue.length,b(gt.uniqueSort(n.slice(i)),(function(t,e){ee.emit("mounted",e)})),r||(r=!0,ee.emit("mounted",Me,{target:t})),i=n.length;b(qe,(function(e,n){gt(kt(n.selector,t)).each((function(t,e){n.handler.call(e,e)}))}))}function Ye(t){var e=x(gt("[prevent-leave]").get(),(function(t){var e=_e("preventLeave",t),n=e.allowLeave;if(Oe(t)||n){var r=jn(t,"prevent-leave");return!r&&n&&delete e.allowLeave,r&&!n}}));return e&&!t?rt(ee.emit("preventLeave",e,null,!0),(function(t){if(!t)throw"user_rejected";_e("preventLeave",e).allowLeave=!0})):!!e}function tn(t,e){ze[t]=gt(e)[0]}function en(t,e){Le[t]=M(e)}function nn(t,e){De[t]=M(e)}en("apply-template",(function(t,e){var n=e(t),r=t.getAttribute("apply-template"),o=ze[r]||ze[jn(t,"apply-template")],i=n.template;if(n.attributes||v(n,{attributes:Lt(t),childNodes:m(t.childNodes)}),o&&o!==i){n.template=o,o=o.cloneNode(!0),i&&b(i.attributes,(function(e,n){t.removeAttribute(n.name)})),Dt(t,n.attributes),zt(o,t);var a=gt(n.childNodes).detach();gt(kt("content:not([for])",o)).replaceWith(a),gt(kt("content[for]",o)).each((function(t,e){gt(e).replaceWith(a.filter(e.getAttribute("for")||""))})),gt(t).empty().append(o.childNodes)}})),en("auto-var",(function(t){An(t,jn(t,"auto-var"))})),en("foreach",(function(t,e){var n=e(t),r=n.template||(n.template=gt(t).contents().detach().filter((function(t,e){return 1===e.nodeType||/\S/.test(e.data||"")})).get()),o=n.nodes||[],i=n.data||[],a=m(jn(t,"foreach"));if(a.length!==i.length||a.some((function(t,e){return i[e]!==t}))){var u=y(a,(function(n){var a=i.indexOf(n);if(a>=0)return i.splice(a,1),o.splice(a*r.length,(a+1)*r.length);var u=gt(r).clone().get(),c=gt(kt("[foreach]",u));return c[0]&&gt(kt("[foreach]",r)).each((function(t,n){e(c[t]).template=e(n).template})),b(u,(function(e,r){1===r.nodeType&&(gt(t).append(r),On(r,{foreach:n}),Xe(r))})),u}));v(n,{nodes:u,data:a.slice()}),gt(o).detach(),gt(t).append(u)}})),en("switch",(function(t,e,n){var r=t.getAttribute("switch")||"";if(Oe(t)&&r){var o=e(t);void 0===o.matched&&On(t,"matched",(function(){return o.matched&&kn(o.matched,!0)}));var i,a,u,c=kn(t),l=pe.eval(r,c),s=gt("[match-"+r+"]",t).filter((function(e,n){return gt(n).parents("[switch]")[0]===t})),f=!X("switch",t.getAttribute("keep-child-state")||""),p=o.matched,h=new Map;s.each((function(t,e){var n=pe.eval('"null" ?? '+e.getAttribute("match-"+r),kn(e));if(h.set(e,n),pe.eval("$0 == $1",[l,n]))return i=e,!1})),i=i||s.filter("[default]")[0]||s[0]||null,p!==i?me("switch",[t,r,"→",l],(function(t){t.log("Matched: ",i||"(none)"),i&&(f&&Pn(i),An(i)),p&&f&&Pn(p,!0),s.each((function(t,e){n(e,{$$class:{active:e===i}})}))})):(a="switch",u=[t,r,"→",l,"(unchanged)"],console.log(ge(a,u)),r in c&&void 0!==h.get(i)&&An(t,r,h.get(i))),o.matched=i}})),nn("template",(function(t,e,n){var r=e(t),o=r.templates;o||(o={},b(t.attributes,(function(t,e){e.value.indexOf("{{")>=0&&(o[e.name]=X(e.name,Ee)?e.value.replace(/^{{|}}$/g,""):e.value)})),!t.childElementCount&&(t.textContent||"").indexOf("{{")>=0&&(o.$$text=t.textContent),r.templates=o);var i=kn(t),a={};b(o,(function(e,n){var r=Tn(n,i,t,e,!X(e,Ee));("$$text"===e?t.textContent:(t.getAttribute(e)||"").replace(/["']/g,""))!==r&&(a[e]=r)})),n(t,a)})),nn("set-style",(function(t,e,n){var r=bt(jn(t,"set-style",!0));b(Ce,(function(t,e){var n=yt(r[e]);n&&(r[e]='url("'+ft(ht(n))+'")')})),n(t,{style:r})})),nn("set-class",(function(t,e,n){n(t,{$$class:jn(t,"set-class")})}));var rn,on,an,un=I(),cn=ee.root,ln={};function sn(t){return rt(t.splice(0),(function(){return t.length&&sn(t)}))}function fn(t){return function(e){if(e.target===e.context)return t.apply(this,arguments)}}function pn(t){var e=t.target;gt(kt('img[src^="/"], video[src^="/"]',e)).each((function(t,e){e.src=ft(e.getAttribute("src"))})),gt(kt('a[href^="/"]',e)).each((function(t,e){e.href=ft(e.getAttribute("href"))})),gt(kt("[data-src]",e)).each((function(t,e){e.src=ft(e.dataset.src),e.removeAttribute("data-src")})),gt(kt("[data-bg-src]",e)).each((function(t,e){e.style.backgroundImage='url("'+ft(e.dataset.bgSrc)+'")',e.removeAttribute("data-bg-src")})),gt(kt("form",e)).on("submit",(function(t){t.preventDefault()}))}function hn(){var t=this;un(t,{init:[],options:{}}),L(t,"element",cn,!0),t.on("mounted",pn)}function dn(t){if(an)throw new Error("brew() can only be called once");rn=new hn,b(he,(function(t,e){var n=e&&h(rn[K("use-"+t)]);n&&n.call(rn,e)})),M(t)(rn),v(window,{app:rn}),an=!0,An(cn,{loading:"initial"}),Be(rt([ee.ready,sn(un(rn).init)],(function(){on=!0,Xe(cn),rn.emit("ready")})),cn)}function gn(t,e){M(e),U(hn,A(K("use-"+t),(function(n){var r=un(this);r.options[t]=v(r.options[t]||{},n),e(this,r.options[t])})))}U(hn,{emit:function(t,e,n,r){return f(e,Node)||(r=n,n=e,e=this.element),ee.emit(t,e,n,r)},define:function(t){q(this,t)},beforeInit:function(t){h(t)&&(t=t.call(this)),un(this).init.push(t)},detect:function(t,e){var n=this,r={};b(t,(function(t,e){ln[e]&&(r[e]=h(ln[e])?ln[e]=rt(ln[e]()).catch((function(t){return console.warn("Detection for "+e+" has thrown exception:",t),!1})):ln[e])})),this.beforeInit(rt(r,(function(t){return t=Object.freeze(v({},n.supports,t)),q(n,{supports:t}),h(e)&&e(t)})))},when:function(t,e){this.beforeInit(rt(t,(function(t){if(t)return e()})))},on:function(t,e,n,r){r=!0===(r||n),h(e)&&(n=e,e=t,t=cn);var o=e;if("string"==typeof e)r&&(n=fn(n)),e.indexOf(" ")>=0?(o={},b(e,(function(t,e){o[e]=n}))):o=A(e,n);else if(r)for(var i in e)e[i]=fn(e[i]);if("string"==typeof t){if(function(t,e){Ue.push({target:t,handlers:e})}(t,o),!on)return;t=gt(t).get()}else t instanceof Node&&(t=[t]);b(t,(function(t,e){ee.on(e,o)}))},matchPath:function(t,e,n){h(e)&&(n=e,e=null),this.on("mounted",(function(r){var o=r.target.getAttribute("match-path");o&&Pe(t,o)&&(!e||gt(r.target).is(e))&&n.call(r.target,r.target)}))},matchElement:function(t,e){qe.push({selector:t,handler:e})},matchRoute:Pe,beforeUpdate:function(t){Ve.push(M(t))},beforePageEnter:function(t,e){h(t)&&(e=t,t="/*"),xe.push({route:Te(t),callback:M(e)})}}),J(hn.prototype);u.TraversableNode,u.TraversableNodeTree,u.InheritedNode;var mn=u.InheritedNodeTree,vn=(u.TreeWalker,ee.root),bn={var:!0,"auto-var":!0,"error-scope":{error:null}},yn=new mn(vn,(function(){var t=this,e=t.element;b(e.dataset,(function(e,n){L(t,e,pe.eval("`"+Z(n||"null")))})),b(wn(e,!0,t),(function(e,n){L(t,e,n)})),e===vn&&(t.loading=null,t.error=null)}));function wn(t,e,n){var r={};return b(bn,(function(o,i){if(t.attributes[o]){if(!0===i&&(i=jn(t,o,!1,n),!g(i)))return;for(var a in i)r[a]=void 0===i[a]||e?null:i[a]}})),r}function xn(t,e){e=e||vn;for(var n=yn.getNode(e);null!==n;n=Object.getPrototypeOf(n))if(V(n,t))return n;return console.warn("Undeclared state: %s",t,{element:e}),yn.setNode(e)}function Sn(t,e){return xn(t,e).element}function An(t,e,n){var r=e&&(g(e)||A(e,n)),o=!1;if("string"==typeof t)Ze((function(){gt(t).each((function(t,e){o|=An(e,r)}))}));else{var i=yn.setNode(t);b(r||jn(t,"set-var"),(function(e,n){if(i[e]!==n){var r=xn(e,t);r[e]=n,o=!0,Ge(r.element)}})),o&&on&&N(Ke)}return!!o}function On(t,e,n){var r=g(e)||A(e,n),o=yn.setNode(t),i={};for(var a in r)h(r[a])?D(o,a,r[a],l):(L(o,a,o[a]),i[a]=r[a]);return An(t,i)}function Pn(t,e){Ze((function(){b(yn.descendants(t),(function(t,n){An(n.element,wn(n.element,e))}))}))}function kn(t,e){var n=function(t){for(var e in t.dataset)return!0}(t)?yn.setNode(t):yn.getNode(t)||{};if(!0!==e)return e?n[e]:v({},n);if(n.element!==t)return{};var r=Object.getOwnPropertyNames(n);return r.splice(r.indexOf("element"),1),O(n,r)}function Tn(t,e,n,r,o){var i={globals:{app:rn}};return o?Y(pe(t,v({},e),i)):pe.eval(t,v({},e),i)}function jn(t,e,n,r){var o=t.getAttribute(e);return o?Tn(o,r||kn(t),0,0,n):n?"":null}ee.watchElements(vn,"["+R(bn).join("],[")+"]",(function(t){b(t,(function(t,e){yn.setNode(e)}))}),!0),yn.on("update",(function(t){b(t.updatedNodes,(function(t,e){Ge(e.element)}))}));var In=new Map,Cn=new Map,En={};function Nn(t,e){En[t]=M(e)}function Mn(t,e){gt(t||"[is-flyout].open").each((function(t,n){var r=In.get(n);r&&(In.delete(n),r.resolve(e),r.source&&Mt(r.source,"target-opened",!1)),le(n,"show").then((function(){Mt(n,"open",!1)}))}))}function Rn(t,e,n,r){var o=n||ee.root,i=t?Tt(t,o):gt(o).closest("[is-flyout]")[0];if(!i)return et();var a,u=In.get(i);if(u)return r?Mn(i,n&&pe.eval("`"+n.value)):u.path=rn.path,u.promise;var c=new mt((function(t){a=t}));return In.set(i,{source:n,promise:c,resolve:a,path:rn.path}),n&&Mt(n,"target-opened",!0),e&&An(i,e),wt(i,"open",(function(){ee.focus(i)})),ce(i,"open"),i.attributes["is-modal"]&&ee.lock(i,c),c}Nn("validate",(function(t){var e=Tt(this.getAttribute("validate")||"",t.target);if(e){var n=ee.emit("validate",e)||!e.checkValidity||e.checkValidity();if(n){if(d(n))return n.then((function(t){if(!t)throw"validation-failed"}))}else t.stopImmediatePropagation(),t.preventDefault()}})),Nn("context-method",(function(t){var e=t.currentTarget,n=K(e.getAttribute("context-method")||"");if(h(rn[n])){var r,o=e.getAttribute("context-form"),i=o?Tt(o,e):e.form,a=!0;return i?(a=ee.emit("validate",i)||i.checkValidity(),r=[Ft(i)]):r=m(jn(e,"method-args")),rt(a,(function(t){if(!t)throw"validation-failed";return rn[n].apply(rn,r)}))}})),ee.ready.then((function(){rn.on("mounted",(function(t){gt(kt("["+R(En).join("],[")+"]",t.target)).attr("async-action","")})),rn.on("navigate",(function(){setTimeout((function(){In.forEach((function(t,e){t.path!==rn.path&&Mn(e)}))}))})),gt("body").on("click","[disabled], .disabled, :disabled",(function(t){t.preventDefault(),t.stopImmediatePropagation()})),gt("body").on("click","[async-action]",(function(t){var e=t.currentTarget,n=k(Cn,e,Array),r=null;if(b(En,(function(t,o){if(e.attributes[t]&&n.indexOf(o)<0)return r=o,!1})),r){n.push(r);var o=r.call(e,t);d(o)&&!t.isImmediatePropagationStopped()&&(t.stopImmediatePropagation(),t.preventDefault(),Be(o).then((function(){Et(t)}),(function(t){Cn.delete(e),console.warn("Action threw an error:",t)})))}else Cn.delete(e)})),gt("body").on("click","a[href]:not([rel]), [data-href]",(function(t){var e=t.currentTarget,n=e.getAttribute("data-href")||e.getAttribute("href");if(t.preventDefault(),t.stopPropagation(),"_blank"===e.getAttribute("target"))window.open(n,G());else if("navigate"in rn){var r=gt(e).closest("[is-modal]")[0];r?(Rn(r).then((function(){rn.navigate(n)})),Mn(r)):(rn.navigate(n),Mn())}else location.href=n})),gt("body").on("click","[set-var]:not([match-path])",(function(t){var e=t.currentTarget;e===gt(t.target).closest("[set-var]")[0]&&(An(e),Mn())})),gt("body").on("click","[toggle]",(function(t){var e=t.currentTarget;t.stopPropagation(),e.attributes["toggle-if"]&&!jn(e,"toggle-if")||Rn(e.getAttribute("toggle"),null,e,!0)})),gt("body").on("click","[toggle-class]",(function(t){var e=t.currentTarget;if(t.stopPropagation(),!e.attributes["toggle-if"]||jn(e,"toggle-if")){var n=e.getAttribute("toggle-class-for"),r=n?Tt(n,e):t.currentTarget;b(e.getAttribute("toggle-class"),(function(t,e){Mt(r,e.slice(1),"+"===e[0])}))}})),gt("body").on("click",(function(){Mn()}))})),ee.ready.then((function(){gt("[brew-template]").each((function(t,e){tn(e.getAttribute("brew-template")||"",e.cloneNode(!0))})),gt("apply-attributes").each((function(t,e){var n=gt(e.getAttribute("elements")||"",e.parentNode||ee.root);b(e.attributes,(function(t,e){"elements"!==e.name&&n.each((function(t,n){n.setAttribute(e.name,e.value)}))}))})).remove(),gt("[style]").each((function(t,e){var n=yt(e.style.backgroundImage);n&&(e.setAttribute("data-bg-src",decodeURIComponent(ft(ht(n)))),e.style.backgroundImage="none")})),window.onbeforeunload=function(t){Ye(!0)&&(t.returnValue="",t.preventDefault())}}));function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}q(dn,Vn(Vn(Vn(Vn(Vn({defaults:he},o),r),i),a),{},{getVar:kn,setVar:An,declareVar:On,evalAttr:jn,isElementActive:Oe,handleAsync:Be,preventLeave:Ye,install:gn,addDetect:function(t,e){ln[t]=M(e)},addTemplate:tn}));var Un=dn;gn("config",(function(t,e){var n=J();q(t,{config:n}),t.beforeInit(Gt(e.path).catch(h(e.fallback)||null).then((function(t){v(n,t),e.freeze&&Q(n)})))}));he.formVar=!0,gn("formVar",(function(t){t.matchElement("form[form-var]",(function(e){var n=e.getAttribute("form-var"),r={},o=function(t){if(t&&(r=Ft(e)),n){var o=kn(e,n)||{};j(r,O(o,R(r)))||An(e,n,v({},o,r))}else An(e,r)};ee.watchAttributes(e,"value",(function(){N(o)})),ee.watchElements(e,":input",(function(t){b(t,(function(t,n){var r=ee.afterDetached(n,e);Ct(r,n,"change input",(function(){N(o)})),r.then(o.bind(null,!0))})),o(!0)}),!0),t.on(e,"reset",(function(){return n?Oe(Sn(n,e))||e.reset():b(e.elements,(function(t,n){Oe(Sn(n.name,e))||(n.value=null)})),!0}))})),t.on("pageenter",(function(t){gt(kt("form[form-var]",t.target)).each((function(t,e){gt(":input:eq(0)",e).trigger("change")}))}))}));function Ln(t,e){var n=navigator.languages?[].slice.apply(navigator.languages):[navigator.language||""];return b(n,(function(t,e){if(e.indexOf("-")>0){var r=e.split("-")[0];if(n.indexOf(r)<0)for(var o=n.length-1;o>=0;o--)n[o].split("-")[0]===r&&n.splice(o+1,0,r)}})),t=t||n,x(n,(function(e){return t.indexOf(e)>=0}))||e||t[0]}gn("i18n",(function(t,e){var n=t.route&&e.routeParam,r=e.cookie&&Qt(e.cookie,864e5),o=n&&t.route[n]||r&&r.get()||Ln(e.languages,e.defaultLanguage),i=function(i){e.languages.indexOf(i)<0&&(i=o),t.language=i,r&&r.set(i),n&&(t.route[n]=i),o!==i&&(o=i,e.reloadOnChange&&location.reload())};t.define({language:o,setLanguage:i,detectLanguage:Ln}),t.watch("language",i),n&&(t.route.watch(n,i),t.on("ready",(function(){t.route[n]=o})))}));gn("login",(function(t,e){var n=Qt((e=v({loginPagePath:"",defaultRedirectPath:"",cookie:"",expiry:0,logout:null,login:null,tokenLogin:null,getTokenFromResponse:null},e)).cookie,e.expiry),r=W(t,"loggedIn",!1,!0);function o(o){r(!0),h(e.getTokenFromResponse)&&n.set(e.getTokenFromResponse(o)),t.emit("login",{data:o})}var i=t.initialPath,a=n.get();a&&h(e.tokenLogin)&&t.beforeInit(ot(rt(e.tokenLogin(a),o))),t.define({login:function(n,a,u){return u=h(u||a),a="string"==typeof a&&a,rt(e.login(n)).then((function(t){return o(t),u&&u()}),(function(t){throw r(!1),t.status>=500?"server-error":"incorrect-cred"})).then((function(){i===t.resolvePath(e.loginPagePath)&&(i=""),t.navigate(a||i||e.defaultRedirectPath),i=""}))},logout:function(o,i){return t.loggedIn?(i=h(i||o),o="string"==typeof o&&o,tt(Ye()).then((function(){return e.logout()})).then((function(){return r(!1),n.delete(),t.emit("logout"),i&&i()})).then((function(){t.navigate(o||e.loginPagePath)}))):tt()}}),t.on("navigate",(function(n){var r=t.resolvePath(e.loginPagePath);s(t.loggedIn,n.pathname!==r)&&(t.loggedIn?t.navigate(e.defaultRedirectPath):(i=n.pathname,t.navigate(r)))}))}));var Dn="background-image".split(" ");he.preloadImage=!0,gn("preloadImage",(function(t){t.beforeUpdate((function(t){var e={};return b(t,(function(t,n){(n.src||n.style)&&Oe(t)&&(n.src&&(e[pt(n.src)]=!0),n.style&&b(Dn,(function(t,r){var o=yt(n.style[r]);o&&(e[pt(o)]=!0)})))})),Xt(R(e),200)})),t.beforePageEnter((function(t){return Xt(t,1e3)}))}));gn("scrollable",(function(t,e){e=v({bounce:!1,scrollbar:!1},e);var n=window.DOMMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix,r=I(),o=0;function i(t){return r(t)||r(t,{childClass:"scrollable-target-"+ ++o})}function a(){gt("[scrollable]:visible").scrollable("refresh")}function u(){gt('[animate-on~="scroll-into-view"]:visible').each((function(t,e){var r=new n(getComputedStyle(e).transform),o=$t(ee.root),i=$t(e),a=Vt(o,i.translate(-r.e||0,0))||Vt(o,i.translate(0,-r.f||0));a^Nt(e,"tweening-in")&&(a||e.attributes["animate-out"])&&(a?ce:le)(e,"scroll-into-view")}))}t.on("mounted",(function(n){gt(kt("[scrollable-target]",n.target)).each((function(t,e){var n=gt(e).closest("[scrollable]")[0];gt(e).addClass(i(n).childClass)})),gt(kt("[scrollable]",n.target)).each((function(n,r){!function(n){var r,o,a=n.getAttribute("scrollable"),u=n.getAttribute("scroller-snap-page")||"",c=n.getAttribute("scroller-state")||"",l=n.getAttribute("scroller-page")||"",s=l&&gt(l,n).get(),f=!1,p=!1;function h(t){if(c){var e={};e[c]=t,An(n,e)}}function d(t,e){e=e||"center top",!f&&St(n)&&(f=!0,r=!0,h(t),gt(n).scrollable("scrollToElement",s[t],e,e,200,(function(){f=!1,r=!1})))}function g(){("always"===u||u===t.orientation)&&St(n)&&(f?p=!0:(p=!1,d(kn(n,c))))}gt(n).scrollable(v({},e,{handle:X(a,"auto scrollbar content")||"content",hScroll:!X(a,"y-only"),vScroll:!X(a,"x-only"),content:"."+i(n).childClass+":visible:not(.disabled)",pageItem:l,snapToPage:"always"===u||u===t.orientation,scrollStart:function(e){t.emit("scrollStart",n,e,!0)},scrollMove:function(e){t.emit("scrollMove",n,e,!0)},scrollEnd:function(e){t.emit("scrollStop",n,e,!0)}})),l&&("always"!==u&&t.on("orientationchange",(function(){gt(n).scrollable("setOptions",{snapToPage:u===t.orientation})})),c&&(t.on(n,{statechange:function(t){var e=t.data[c];f||((0|$t(s[e]).width)>(0|$t().width)?d(e,"left center"):d(e))},scrollMove:function(t){f=!0,r||h(t.pageIndex)},scrollStop:function(t){h(t.pageIndex),f=!1,p&&g()}},!0),gt(window).on("resize",(function(){clearTimeout(o),o=setTimeout(g,200)}))))}(r)}))})),t.on("statechange orientationchange animationcomplete",(function(){C(a)})),t.on("pageenter",(function(t){var e=gt(kt("[scrollable]",t.target)).add(gt(t.target).parents("[scrollable]"));gt(kt("[scrollable-target]",t.target)).each((function(t,e){gt(e).toggleClass("disabled",!Oe(e))})),e.scrollable("refresh"),e.filter(":not([keep-scroll-offset])").scrollable("scrollTo",0,0)})),t.on("resize pageenter statechange scrollMove orientationchange",(function(){C(u)}))}));u.IS_IOS,u.IS_IE10,u.IS_IE,u.IS_MAC;var zn=u.IS_TOUCH;he.viewport=!0,gn("viewport",(function(t){var e,n,r,o=W(t,"orientation","",!0),i=zn&&"MacIntel"!==navigator.platform,a=screen.availWidth,u=screen.availHeight;function c(c){zn&&screen.availWidth===a&&screen.availHeight===u&&screen.availWidth===window.innerWidth?gt("body").css("min-height",gt("body").height()+"px"):gt("body").css("min-height","0"),a=screen.availWidth,u=screen.availHeight;var l=gt("body").height()||0;(gt("html").height()||0)<l&&gt(ee.activeElement).is(":text")&&Rt(ee.activeElement);var f=e;n=i?a:document.body.offsetWidth,r=i?a===window.innerWidth?u:window.innerHeight:document.body.offsetHeight,o((e=n/r)>=1?"landscape":"portrait"),!1!==c&&(t.emit("resize",{aspectRatio:e,viewportWidth:n,viewportHeight:r}),s(e>=1,f>=1)&&t.emit("orientationchange",{orientation:t.orientation}))}q(t,{get aspectRatio(){return e},get viewportWidth(){return n},get viewportHeight(){return r}}),t.on("orientationchange",(function(){ce(ee.root,"orientationchange")})),gt(window).on("resize",(function(){C(c)})),gt((function(){c(!1)}))}));var Fn=Un},609:function(t){"use strict";t.exports=e},804:function(t){"use strict";t.exports=n},160:function(t){"use strict";t.exports=r},163:function(e){"use strict";e.exports=t}},i={};function a(t){if(i[t])return i[t].exports;var e=i[t]={exports:{}};return o[t](e,e.exports,a),e.exports}return a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a(344)}().default}));
//# sourceMappingURL=brew.min.js.map