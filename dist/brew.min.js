!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("zeta-dom").util,require("zeta-dom").shim,require("zeta-dom").css,require("zeta-dom").dom,require("waterpipe"),require("jQuery"),require("historyjs"),require("zeta-dom"),require("zeta-dom")):"function"==typeof define&&define.amd?define("brew",[["zeta-dom","util"],["zeta-dom","shim"],["zeta-dom","css"],["zeta-dom","dom"],"waterpipe","jQuery","historyjs",["zeta-dom"],"zeta-dom"],t):"object"==typeof exports?exports.brew=t(require("zeta-dom").util,require("zeta-dom").shim,require("zeta-dom").css,require("zeta-dom").dom,require("waterpipe"),require("jQuery"),require("historyjs"),require("zeta-dom"),require("zeta-dom")):e.brew=t(e.zeta.util,e.zeta.shim,e.zeta.css,e.zeta.dom,e.waterpipe,e.jQuery,e.History,e.zeta,e.zeta)}(self,(function(e,t,n,r,o,i,a,c,u){return function(){"use strict";var l={251:function(e,t,n){n.r(t),n.d(t,{default:function(){return yt}});var r={};n.r(r),n.d(r,{baseUrl:function(){return u},combinePath:function(){return s},isSubPathOf:function(){return p},normalizePath:function(){return f},setBaseUrl:function(){return l},toAbsoluteUrl:function(){return h},toRelativeUrl:function(){return g},withBaseUrl:function(){return d}});var o={};n.r(o),n.d(o,{addStyleSheet:function(){return E},api:function(){return T},cookie:function(){return I},copyAttr:function(){return x},deleteCookie:function(){return k},getAttrValues:function(){return w},getCookie:function(){return P},getFormValues:function(){return S},getJSON:function(){return C},getQueryParam:function(){return A},loadScript:function(){return j},preloadImages:function(){return N},setAttr:function(){return $},setCookie:function(){return O}});var i={};n.r(i),n.d(i,{addAnimateIn:function(){return H},addAnimateOut:function(){return _},animateIn:function(){return W},animateOut:function(){return D}});var a={};n.r(a),n.d(a,{addAsyncAction:function(){return lt},closeFlyout:function(){return st},openFlyout:function(){return ft}});var c=n(990),u="";function l(e){u=e}function s(e,t){return e=f(e),t=f(t),"/"===e?t:"/"===t?e:e+t}function f(e,t){if(null==e)return"/";if(/:\/\/|\?|#/.test(e)){var n=document.createElement("a");return n.href=e,n.origin+f(n.pathname,t)+n.search+n.hash}if(e=String(e).replace(/\/+(\/|$)/,"$1"),t&&e.indexOf("./")>=0){for(var r=e.split("/"),o=1;o<r.length;)"."===r[o]?r.splice(o,1):".."===r[o]?r.splice(--o,2):o++;e=r.join("/")}return"/"===e[0]?e:"/"+e}function d(e){return e=f(e),u&&"/"===e[0]&&!p(e,u)?f(u+e):e}function h(e){return e.indexOf("://")>0?e:location.origin+d(e)}function g(e){return e.substr(0,location.origin.length)===location.origin?e.substr(location.origin.length):e}function p(e,t){return e.substr(0,t.length)===t&&(e.length===t.length||"/"===e[t.length])}var m=n(774),v=n(260),b={},y={};function w(e){var t={};return(0,c.each)(e.attributes,(function(e,n){t[n.name]=n.value})),t}function $(e,t,n){(0,c.each)((0,c.isPlainObject)(t)||(0,c.kv)(t,n),(function(t,n){e.setAttribute(t,n)}))}function x(e,t){(0,c.each)(e.attributes,(function(e,n){t.setAttribute(n.name,n.value)}))}function S(e){var t={};return(0,c.each)(e.elements,(function(n,r){if(r.name&&!(r.name in t)){var o=e.elements[r.name];(0,c.defineGetterProperty)(t,r.name,(function(){return"checkbox"===o.type?o.checked:o.value}))}})),t}function A(e){return new RegExp("[?&]"+e+"=([^&]+)","i").test(location.search)&&decodeURIComponent(RegExp.$1)}function P(e){return new RegExp("(?:^|\\s|;)"+e+"=([^;]+)").test(document.cookie)&&RegExp.$1}function O(e,t,n){return document.cookie=e+"="+t+";path=/"+(n?";expires="+new Date(Date.now()+n).toGMTString():""),t}function k(e){document.cookie=e+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT"}function I(e,t){return{get:function(){return P(e)},set:function(n){return O(e,n,t)},delete:function(){return k(e)}}}function T(e,t){var n="get post delete";if("string"==typeof e&&(0,c.matchWord)(e,n))return T(t=(0,c.extend)({},"string"==typeof t?{baseUrl:t}:t,{methods:e}))[e];var r={baseUrl:(e=(0,c.extend)({},e)).baseUrl,token:e.token};return(0,c.each)(e.methods||n,(function(t,o){(0,c.matchWord)(o,n)&&((0,c.defineHiddenProperty)(r,o,(function t(n,i){if(!r.baseUrl)return(0,c.watchOnce)(r,"baseUrl",(function(){return t(n,i)}));var a={"Content-Type":"application/json"};return r.token&&(a.Authorization="Bearer "+r.token),m.$.ajax({method:o,url:s(r.baseUrl,n),headers:a,dataType:"json",data:JSON.stringify(i||{}),success:function(t){(0,c.isFunction)(e.getTokenFromResponse)&&(r.token=e.getTokenFromResponse(t,r.token))}}).catch((function(e){if(0===e.status)throw"network-failed";var t=e.responseJSON;if(t)throw console.error(n+":",t.error||t.message),t.error||t.message;throw e.statusText}))})),(0,c.defineAliasProperty)(r[o],"baseUrl",r),(0,c.defineAliasProperty)(r[o],"token",r))})),r}function C(e){return m.$.getJSON(d(e))}function j(e,t){return(0,c.isArray)(e)?e.reduce((function(e,n){return e.then((function(){return j(n,t)}))}),(0,c.resolve)()):(y[e]||(y[e]=new m.Promise((function(n,r){var o=document.createElement("script");if((t=t||{}).nomodule){if("noModule"in o)return void n();o.setAttribute("nomodule","")}t.module&&o.setAttribute("type","module"),o.addEventListener("load",(function(){n({})})),o.addEventListener("error",(function(){r()})),o.src=d(e),document.head.appendChild(o)}))),y[e])}function E(e,t){var n=document.createElement("link");n.rel="stylesheet",n.href=d(e),t&&(n.media=t),document.head.appendChild(n)}function N(e,t){if(!(0,c.isArray)(e)){var n={},r=function(e){(0,v.isCssUrlValue)(e)&&(n[RegExp.$1||RegExp.$2||RegExp.$3]=!0)};(0,c.iterateNode)((0,c.createNodeIterator)(e,1),(function(e){(0,c.is)(e,"img")&&e.src&&(n[e.src]=!0),r(getComputedStyle(e).backgroundImage),r(getComputedStyle(e,"::before").backgroundImage),r(getComputedStyle(e,"::after").backgroundImage)})),e=(0,c.keys)(n)}var o=[],i=[];return e.forEach((function(e){o.push(b[e]||(b[e]=new m.Promise((function(t){i.push(e),(0,m.$)("<img>").on("load error",(function(){b[e]=!0,t()})).attr("src",e)}))))})),!o.length||o.every((function(e){return!0===e}))?(0,c.resolve)():(i.length&&console.log("Preload image",{urls:i}),(0,c.setPromiseTimeout)((0,c.resolveAll)((0,c.values)(b)),t,!0))}var z=n(50);const q=n.n(z)();var F={},M={},R=new m.Map,V=0;function U(e,t,n,r){if(!n.length)return(0,c.resolve)();var o,i,a,u=++V;n=n.map((function(e){return e instanceof m.Promise?(0,c.catchAsync)(e):new m.Promise((function(t){e.then(t,t)}))})),(0,c.catchAsync)((0,c.resolveAll)(n,(function(){clearTimeout(o),a(),R.delete(e),console.log("Animation #%i completed",u)}))),n.push(new m.Promise((function(e,t){a=e,i=t}))),o=setTimeout((function(){i("Animation #"+u+" timed out"),console.log("Animation #%i might take longer than expected",u,n),R.delete(e)}),1500);var l=(0,c.catchAsync)((0,c.resolveAll)(n));return console.log("Animation #%i triggered on %s",u,r,{elements:t}),R.set(e,l),l}function L(e,t,n,r){var o=[(0,v.runCSSTransition)(e,t),q.emit(n,e)],i=parseFloat((0,m.$)(e).css("transition-delay"));return(0,c.each)(r,(function(t,n){if(e.attributes[t]){var r=e.getAttribute(t);o.push(new m.Promise((function(t,o){setTimeout((function(){(0,c.resolveAll)(n(e,r)).then(t,o)}),1e3*i)})))}})),(0,c.resolveAll)(o,(function(){return e}))}function W(e,t,n,r){if(R.has(e))return R.get(e).then((function(){return W(e,t,n,r)}));r=r||function(){return!0},q.emit("animationstart",e,{animationType:"in",animationTrigger:t},!0);var o=n?(0,m.$)(n,e):(0,m.$)(),i="show"===t?':not([animate-on]), [animate-on~="'+t+'"]':'[animate-on~="'+t+'"]',a=[],u=[];return(0,m.$)((0,c.selectIncludeSelf)("[animate-in]",e)).filter(i).each((function(e,t){!o.find(t)[0]&&r(t)&&(0,c.isVisible)(t)&&(a.push(t),u.push(L(t,"tweening-in","animatein",F)))})),(0,m.$)((0,c.selectIncludeSelf)("[animate-sequence]",e)).filter(i).each((function(e,t){if(!o.find(t)[0]&&r(t)&&(0,c.isVisible)(t)){var n=t.getAttribute("animate-sequence")||"",i=t.getAttribute("animate-sequence-type")||"",l=(0,m.$)(t).find(">"===n[0]?n:(0,m.$)(n));void 0!==(0,m.$)(t).attr("animate-sequence-reverse")&&[].reverse.apply(l),l.css("transition-duration","0s"),l.attr("animate-in",i).attr("is-animate-sequence",""),l.each((function(e,t){"inline"===(0,m.$)(t).css("display")&&(0,m.$)(t).css("display","inline-block"),a.push(t),u.push(new m.Promise((function(n,r){setTimeout((function(){(0,m.$)(t).css("transition-duration",""),L(t,"tweening-in","animatein",F).then(n,r)}),50*e)})))})),t.attributes["animate-in"]||(0,m.$)(t).attr("animate-in","").addClass("tweening-in")}})),U(e,a,u,t).then((function(){q.emit("animationcomplete",e,{animationType:"in",animationTrigger:t},!0)}))}function D(e,t,n,r,o){r=r||function(){return!0},q.emit("animationstart",e,{animationType:"out",animationTrigger:t},!0);var i=n?(0,m.$)(n,e):(0,m.$)(),a="show"===t?':not([animate-on]), [animate-on~="'+t+'"]':'[animate-on~="'+t+'"]',u=[],l=[];return(0,m.$)((o?m.$:c.selectIncludeSelf)("[animate-out]",e)).filter(a).each((function(e,t){!i.find(t)[0]&&r(t)&&(u.push(t),l.push(L(t,"tweening-out","animateout",M)))})),U(e,u,l,t).then((function(){var n=(0,m.$)((o?m.$:c.selectIncludeSelf)("[animate-out], .tweening-in, .tweening-out",e));"show"!==t&&(n=n.filter(a)),(n=n.filter((function(e,t){return r(t)}))).removeClass("tweening-in tweening-out"),n.find("[is-animate-sequence]").removeAttr("animate-in").removeClass("tweening-in tweening-out"),q.emit("animationcomplete",e,{animationType:"out",animationTrigger:t},!0)}))}function H(e,t){F[e]=(0,c.throwNotFunction)(t)}function _(e,t){M[e]=(0,c.throwNotFunction)(t)}var G=window.waterpipe||n(160);const J=G;var Q=G;Q.pipes["{"]=function(e,t){for(var n={};t.hasArgs();){var r=t.raw();if("}"===r)break;n[String(r).replace(/:$/,"")]=t.next()}return n},Q.pipes["{"].varargs=!0;const B={};var K=window.History;K&&K.Adapter||(window.jQuery=n(609),n(229),K=window.History);const X=K;function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){return"["+e+"] "+(t=(0,c.makeArray)(t).map((function(e){return(0,c.is)(e,Element)?(n=e).tagName.toLowerCase()+(n.id?"#"+n.id:n.className.trim()&&n.className.replace(/^\s*|\s+(?=\S)/g,"."))+":":e&&"object"===Y(e)?(t=JSON.stringify(e),'[{"]'.indexOf(t[0])>=0&&t.length>200?t[0]+t.substr(1,199)+"…"+t[t.length-1]:t):e;var t,n})).join(" "))}function ee(e,t,n){var r;try{console.groupCollapsed(Z(e,t)),r=!0}catch(e){}try{n(console)}finally{if(r)try{console.groupEnd()}catch(e){}}}var te,ne=(0,c.createPrivateStore)(),re=new m.Map,oe=[],ie=[q.root];function ae(e,t){var n=(0,m.$)(e).closest("[match-path]")[0];return!n||(t||ie).indexOf(n)>=0}function ce(e,t,n){return e=e||[],delete(n=(0,c.extend)({},n)).remainingSegments,{minPath:f(t.slice(0,e.minLength).join("/")),maxPath:f(t.slice(0,e.length).join("/")),route:e,params:n}}function ue(e,t,n){var r=this,o=ne(r,{});o.routes=t.map((function(e){var t,n=[];return String(e).replace(/\/(\*|[^{][^\/]*|\{([a.-z_$][a-z0-9_$]*)(\?)?(?::(?![*+?])((?:(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])([*+?]|\{\d+(?:,\d+)\})?)+))?\})(?=\/|$)/gi,(function(e,o,i,a,c){a&&!t&&(t=n.length),n.push(i?{name:i,pattern:c?new RegExp("^"+c+"$","i"):/./}:o.toLowerCase()),r[i||"remainingSegments"]=null})),(0,c.defineHiddenProperty)(n,"value",e),(0,c.defineHiddenProperty)(n,"exact",!("*"===n[n.length-1]&&n.splice(-1))),(0,c.defineHiddenProperty)(n,"minLength",t||n.length),(0,c.defineHiddenProperty)(n,"names",(0,c.map)(n,(function(e){return e.name}))),n})),Object.preventExtensions(r),(0,c.extend)(r,r.parse(n)),o.current=o.lastMatch,o.handleChanges=(0,c.watch)(r,!0),Object.getOwnPropertyNames(r).forEach((function(e){(0,c.defineObservableProperty)(r,e)})),(0,c.watch)(r,(function(){var t=function(e){return!1===(0,c.any)(e.params,(function(e,t){return e!==r[t]}))},n=!1,i=!t(o.current);if(i&&o.lastMatch&&(o.current=o.lastMatch,i=!t(o.current)),i){var a,u,l=[],s=(0,c.any)(o.routes,(function(e){for(l.length=0,a=0,u=e.length;a<u;a++){var t=e[a].name;if(t&&a<e.minLength&&!e[a].pattern.test(r[t]||""))return!1;l[a]=t?r[t]:e[a]}for(a in r)"remainingSegments"!==a&&r[a]&&e.names.indexOf(a)<0&&(r[a]=null,n=!0);return!0}));o.current=ce(s,l,r)}(o.current.route||"").exact&&"/"!==r.remainingSegments?r.remainingSegments="/":n||e.navigate(r.toString())}))}(0,c.definePrototype)(ue,{parse:function(e){var t=ne(this),n=f(e).slice(1).split("/"),r={},o=(0,c.any)(t.routes,(function(e){if(r={},n.length<e.minLength)return!1;for(var t=0,o=e.length;t<o;t++){var i=e[t].name;if(n[t]&&!(i?e[t].pattern.test(n[t]):(0,c.iequal)(n[t],e[t])))return!1;i&&(r[i]=n[t])}return r.remainingSegments=e.exact?"/":f(n.slice(e.length).join("/")),!0}));for(var i in this)r[i]=r[i]||null;return t.lastMatch=ce(o,n,r),r},set:function(e){var t=this;if("string"==typeof e){if((0,c.iequal)(e,t.toString()))return;e=t.parse(e)}ne(t).handleChanges((function(){(0,c.extend)(t,e)}))},toString:function(){return s(ne(this).current.maxPath||"/",this.remainingSegments)}}),(0,c.watchable)(ue.prototype),Je("router",(function(e,t){!function(e,t){var n,r,o=e.path||t.initialPath||t.queryParam&&A(t.queryParam)||location.pathname.substr(t.baseUrl.length)||"/",i=new ue(e,t.routes,o),a="",h={},g={},v=0;function b(t,n){return t=decodeURI(t),n=n||e.path,"~"===t[0]?t=s(((0,c.iequal)(n,i.toString())?ne(i).current:i.parse(n)&&ne(i).lastMatch).minPath,t.slice(1)):"/"!==t[0]&&(t=s(n,t)),(t=f(t,!0)).indexOf("{")<0?t:t.replace(/\{([^}]+)\}/g,(function(e,t){return i[t]||e}))}function y(t,n){t=d(b(t)),X[n?"replaceState":"pushState"]({},document.title,t),e.path=t.substr(u.length)||"/"}function w(t,n,r){if(a===t){var o=new m.Map,i=q.eventSource,l=ie.slice(0);ie=r,te=(0,m.$)(r).filter("[page-title]")[0],g={};var s=it(te,"page-title",!0);location.pathname.substr(u.length)!==t&&X[v?"pushState":"replaceState"]({},s,d(t)),v++,document.title=s,Ce(!0,(function(){ee(i,["pageenter",t],(function(){re.forEach((function(r){var a=ie.indexOf(r)>=0;a===l.indexOf(r)<0&&(a?(nt(r,!1),tt(r,null),setTimeout((function(){var n=o.get((0,m.$)(r).parents("[match-path]")[0]),i=oe.map((function(e){return e(r,t)}));i.push(n),o.set(r,(0,c.resolveAll)(i,(function(){ie.indexOf(r)>=0&&((0,c.setClass)(r,"hidden",!1),W(r,"show","[match-path]"),e.emit("pageenter",r,{pathname:t},!0))})))}))):(e.emit("pageleave",r,{pathname:n},!0),D(r,"show","[match-path]").then((function(){ie.indexOf(r)<0&&ee(i,["pageleave",n],(function(){(0,c.setClass)(r,"hidden",!0),nt(r,!0)}))}))))}))})),(0,c.each)(o,(function(e,t){ke(t,e)}))}))}}function $(){if(r!==a)if(q.locked(q.activeElement,!0))y((n=r===n?null:a)||r,!0);else{var t=Ee();if(t)return n=a,y(a,!0),void(0,c.resolve)(t).then((function(){y(r,!0)}));n=null;var o,u=[q.root],l=a;Ce(!0,(function(){re.forEach((function(e,t){var n=b(e.getAttribute("match-path"),r);((0,m.$)('[switch=""]',e)[0]?p(r,n):r===n)&&(u.unshift(e),e.parentNode||((0,m.$)(t).replaceWith(e),Ie(e),je(e)))}))})),g[r]&&g[l]?w(r,l,u):(g[r]=!0,(0,m.$)('[switch=""]').each((function(e,t){if(ae(t,u)){var n=(0,m.$)(t).children("[match-path]");if(!n.filter((function(e,t){return u.indexOf(t)>=0}))[0])return o=(n.filter("[default]")[0]||n[0]).getAttribute("match-path"),!1}})),o?y(o,!0):(console.log("Nagivate",r),a=r,e.path=r,i.set(r),ke(t=e.emit("navigate",{pathname:r,oldPathname:l,route:Object.freeze((0,c.extend)({},i))}),q.root,(function(){w(r,l,u)}))))}}(0,c.watch)(h,!0),(0,c.defineObservableProperty)(h,"path","",(function(e){return Me?((r=b(e,a))!==a&&(0,c.setImmediateOnce)($),a):a})),l(t.baseUrl||""),e.define({resolvePath:b,navigate:y,back:function(){v>1?X.back():"/"!==e.path&&y("/")}}),(0,c.defineOwnProperty)(e,"initialPath",o,!0),(0,c.defineOwnProperty)(e,"route",i,!0),(0,c.defineAliasProperty)(e,"path",h),e.beforeInit((function(){q.ready.then((function(){(0,m.$)("[match-path]").addClass("hidden").each((function(e,t){var n=document.createElement("div");n.setAttribute("style","display: none !important"),n.setAttribute("match-path",t.getAttribute("match-path")||""),t.attributes.default&&n.setAttribute("default",""),(0,m.$)(t).before(n),(0,m.$)(t).detach(),re.set(n,t)})),X.Adapter.bind(window,"statechange",(function(){e.path=location.pathname.substr(u.length)||"/"}))}))})),e.on("ready",(function(){e.path=o})),e.on("mounted",(function(t){var n=(0,m.$)((0,c.selectIncludeSelf)("video[autoplay], audio[autoplay]",t.target));n[0]&&(n.removeAttr("autoplay"),e.on(t.target,{pageenter:function(){n.each((function(e,t){0!==t.readyState&&(t.currentTime=0),t.play()}))},pageleave:function(){n.each((function(e,t){t.pause()}))}},!0))})),e.on("pageleave",(function(t){(0,m.$)((0,c.selectIncludeSelf)("form",t.target)).each((function(t,n){e.emit("reset",n,null,!1)||n.reset()}))})),e.on("statechange",(function(e){(0,c.containsOrEquals)(e.target,te)&&(document.title=it(te,"page-title",!0))}))}(e,t||{})}));var le="background-image".split(" "),se="checked selected disabled readonly multiple ismap",fe=(0,c.createPrivateStore)(),de=q.root,he=new m.Set,ge=new m.Map,pe=[],me=[],ve=[],be={},ye={},we={},$e=0;function xe(e,t){var n=fe(e)||fe(e,{});return n[t]||(n[t]={})}function Se(e,t){var n={};return(0,c.each)(e,(function(e,r){r!==t[e]&&(n[e]=r)})),n}function Ae(e,t,n){(0,c.each)(t,(function(t,n){"$$class"===t?(0,c.setClass)(e,n):"$$text"===t?e.textContent=n:"style"===t?(0,m.$)(e).css(n):(0,c.matchWord)(t,se)?e[t]=!!n:e.setAttribute(t,n)})),n||q.emit("domchange",e)}function Pe(e,t){(0,c.each)(t,(function(t,n){e[t]="$$class"===t||"style"===t?(0,c.extend)({},e[t],n):n}))}function Oe(e,t){var n,r=new m.Set;do{e=(0,c.makeArray)(e),n=(0,c.makeArray)(r),(0,c.each)(be,(function(o,i){(0,m.$)((0,c.selectIncludeSelf)("["+o+"]",e)).not(n).each((function(e,n){i(n,xe(n,o),t),r.add(n)}))}))}while(n.length!==r.size)}function ke(e,t,n){if(!(0,c.isThenable)(e))return(0,c.resolve)((n||c.noop)());if(t||"script"!==q.eventSource){var r=et("loading",t=t||q.activeElement),o=et("error",t),i=xe(r,"handleAsync");tt(r,{loading:rt(r).loading||!0}),tt(o,{error:null}),i.value=(i.value||0)+1,e.then((function(){tt(r,{loading:!!--i.value})}),(function(e){tt(r,{loading:!!--i.value}),tt(o,{error:""+(e.message||e)})}))}return e.then(n||null)}function Ie(e){he.add(e)}function Te(e){if(!$e){var t=new m.Map,n=new m.Map,r=function(e,t){Pe((0,c.mapGet)(n,e,Object),t)};ee(q.eventSource,"statechange",(function(){Oe(he,r);var e=m.$.uniqueSort((0,c.grep)(he,(function(e){return(0,c.containsOrEquals)(de,e)&&he.delete(e)})));(0,c.each)(e,(function(e,n){var r=rt(n),o=xe(n,"oldValues");t.set(n,{oldValues:(0,c.extend)({},o),newValues:Se(r,o)}),(0,c.extend)(o,r)}));var n=[];(0,c.each)(e.reverse(),(function(e,o){ee("statechange",[o,t.get(o).newValues],(function(e){e.log(o===de?document:o),(0,m.$)((0,c.selectIncludeSelf)("["+(0,c.keys)(ye).join("],[")+"]",o)).not(n).each((function(e,t){(0,c.each)(ye,(function(e,n){t.attributes[e]&&n(t,xe(t,e),r)})),n.push(t)}))}))}))})),(0,c.resolveAll)(pe.map((function(e){return e(n)}))).then((function(){var r=new m.Map;(0,c.each)(n,(function(n,o){if(e)ge.has(n)?Pe(ge.get(n),o):Ae(n,o);else{var i=(0,m.$)(n).filter("[match-path]")[0]||(0,m.$)(n).parents("[match-path]")[0]||de,a=r.get(i);if(!a){var u=function(e){var n,r=e.getAttribute("animate-on-statechange");if(!r)return!0;for(;e&&!(n=t.get(e));e=e.parentNode);return n&&(0,c.any)(r,(function(e){return e in n.newValues}))};a=[],(0,c.setImmediate)((function(){D(i,"statechange","[match-path]",u,!0).then((function(){(0,c.each)(a,(function(e,t){Ae(t,(0,c.mapRemove)(ge,t))})),W(i,"statechange","[match-path]",u)}))})),r.set(i,a)}Pe((0,c.mapGet)(ge,n,Object),o),a.push(n)}})),(0,c.each)(t,(function(e,t){q.emit("statechange",e,{data:(0,c.extend)({},rt(e)),newValues:t.newValues,oldValues:t.oldValues},!0)}))}))}}function Ce(e,t){var n=!0;try{$e=($e||0)+1,(0,c.throwNotFunction)(t||e)()}catch(e){throw n=!1,e}finally{!--$e&&n&&Te(!0===e)}}function je(e){q.on(e,"__brew_handler__",c.noop),Oe(e,(function(e,t){Ae(e,t,!0)}));for(var t=[e],n=e===de,r=-1,o=0;r<ve.length;)(0,c.each)(ve.slice(r<0?0:r),(function(n,r){(0,m.$)((0,c.selectIncludeSelf)(r.target,e)).each((function(e,n){Fe.on(n,r.handlers),r.handlers.mounted&&t.indexOf(n)<0&&t.push(n)}))})),r=ve.length,(0,c.each)(m.$.uniqueSort(t.slice(o)),(function(e,t){q.emit("mounted",t)})),n||(n=!0,q.emit("mounted",de,{target:e})),o=t.length;(0,c.each)(me,(function(t,n){(0,m.$)((0,c.selectIncludeSelf)(n.selector,e)).each((function(e,t){n.handler.call(t,t)}))}))}function Ee(e){var t=(0,c.any)((0,m.$)("[prevent-leave]").get(),(function(e){var t=xe(e,"preventLeave"),n=t.allowLeave;if(ae(e)||n){var r=it(e,"prevent-leave");return!r&&n&&delete t.allowLeave,r&&!n}}));return t&&!e?(0,c.resolveAll)(q.emit("preventLeave",t,null,!0),(function(e){if(!e)throw"user_rejected";xe(t,"preventLeave").allowLeave=!0})):!!t}function Ne(e,t){we[e]=(0,m.$)(t)[0]}function ze(e,t){be[e]=(0,c.throwNotFunction)(t)}function qe(e,t){ye[e]=(0,c.throwNotFunction)(t)}ze("apply-template",(function(e,t){var n=e.getAttribute("apply-template"),r=we[n]||we[it(e,"apply-template")],o=t.template;if(t.attributes||(0,c.extend)(t,{attributes:w(e),childNodes:(0,c.makeArray)(e.childNodes)}),r&&r!==o){t.template=r,r=r.cloneNode(!0),o&&(0,c.each)(o.attributes,(function(t,n){e.removeAttribute(n.name)})),$(e,t.attributes),x(r,e);var i=(0,m.$)(t.childNodes).detach();(0,m.$)((0,c.selectIncludeSelf)("content:not([for])",r)).replaceWith(i),(0,m.$)((0,c.selectIncludeSelf)("content[for]",r)).each((function(e,t){(0,m.$)(t).replaceWith(i.filter(t.getAttribute("for")||""))})),(0,m.$)(e).empty().append(r.childNodes)}})),ze("foreach",(function(e,t){var n=t.template||(t.template=(0,m.$)(e).contents().detach().filter((function(e,t){return 1===t.nodeType||/\S/.test(t.data||"")})).get()),r=t.nodes||[],o=t.data||[],i=(0,c.makeArray)(it(e,"foreach"));if(i.length!==o.length||i.some((function(e,t){return o[t]!==e}))){var a=(0,c.map)(i,(function(t){var i=o.indexOf(t);if(i>=0)return o.splice(i,1),r.splice(i*n.length,(i+1)*n.length);var a=(0,m.$)(n).clone().get();return(0,c.each)(a,(function(n,r){1===r.nodeType&&((0,m.$)(e).append(r),(0,c.defineOwnProperty)(rt(r),"foreach",null),tt(r,(0,c.kv)("foreach",t),!0),je(r))})),a}));(0,c.extend)(t,{nodes:a,data:i.slice()}),(0,m.$)(r).detach(),(0,m.$)(e).append(a)}})),ze("auto-var",(function(e){tt(e,it(e,"auto-var"),!0)})),ze("switch",(function(e,t,n){var r=e.getAttribute("switch")||"";if(ae(e)&&r){var o,i,a,u=rt(e),l=J.eval(r,(0,c.extend)({},u)),s=(0,m.$)("[match-"+r+"]",e).filter((function(t,n){return(0,m.$)(n).parents("[switch]")[0]===e})),f=new m.Map;s.each((function(e,t){var n=J.eval('"null" ?? '+t.getAttribute("match-"+r),(0,c.extend)({},rt(t)));if(f.set(t,n),J.eval("$0 == $1",[l,n]))return o=t,!1})),o=o||s.filter("[default]")[0]||s[0]||null,u.matched&&u.matched.element===o?(i="switch",a=[e,r,"→",l,"(unchanged)"],console.log(Z(i,a)),r in u&&void 0!==f.get(o)&&tt(e,(0,c.kv)(r,f.get(o)),!0)):ee("switch",[e,r,"→",l],(function(t){t.log("Matched: ",o||"(none)"),o&&tt(o,null,!0),tt(e,{matched:o&&rt(o)},!0),s.each((function(e,t){n(t,{$$class:{active:t===o}})}))}))}})),qe("template",(function(e,t,n){var r=t.templates;r||(r={},(0,c.each)(e.attributes,(function(e,t){t.value.indexOf("{{")>=0&&(r[t.name]=(0,c.matchWord)(t.name,se)?t.value.replace(/^{{|}}$/g,""):t.value)})),!e.childElementCount&&(e.textContent||"").indexOf("{{")>=0&&(r.$$text=e.textContent),t.templates=r);var o=rt(e),i={};(0,c.each)(r,(function(t,n){var r=ot(n,o,e,t,!(0,c.matchWord)(t,se));("$$text"===t?e.textContent:(e.getAttribute(t)||"").replace(/["']/g,""))!==r&&(i[t]=r)})),n(e,i)})),qe("set-style",(function(e,t,n){var r=(0,v.parseCSS)(it(e,"set-style",!0));(0,c.each)(le,(function(e,t){var n=(0,v.isCssUrlValue)(r[t]);n&&(r[t]='url("'+d(n)+'")')})),n(e,{style:r})})),qe("set-class",(function(e,t,n){n(e,{$$class:it(e,"set-class")})}));var Fe,Me,Re,Ve=(0,c.createPrivateStore)(),Ue=q.root,Le={};function We(e){return(0,c.resolveAll)(e.splice(0),(function(){return e.length&&We(e)}))}function De(e){return function(t){if(t.target===t.context)return e.apply(this,arguments)}}function He(e){var t=e.target;(0,m.$)((0,c.selectIncludeSelf)('img[src^="/"], video[src^="/"]',t)).each((function(e,t){t.src=d(t.getAttribute("src"))})),(0,m.$)((0,c.selectIncludeSelf)('a[href^="/"]',t)).each((function(e,t){t.href=d(t.getAttribute("href"))})),(0,m.$)((0,c.selectIncludeSelf)("[data-src]",t)).each((function(e,t){t.src=d(t.dataset.src),t.removeAttribute("data-src")})),(0,m.$)((0,c.selectIncludeSelf)("[data-bg-src]",t)).each((function(e,t){t.style.backgroundImage='url("'+d(t.dataset.bgSrc)+'")',t.removeAttribute("data-bg-src")})),(0,m.$)((0,c.selectIncludeSelf)("form",t)).on("submit",(function(e){e.preventDefault()}))}function _e(){var e=this;Ve(e,{init:[],options:{}}),(0,c.defineOwnProperty)(e,"element",Ue,!0),e.on("mounted",He)}function Ge(e){if(Re)throw new Error("brew() can only be called once");Fe=new _e,(0,c.each)(B,(function(e,t){var n=t&&(0,c.isFunction)(Fe[(0,c.camel)("use-"+e)]);n&&n.call(Fe,t)})),(0,c.throwNotFunction)(e)(Fe),(0,c.extend)(window,{app:Fe}),Re=!0,tt(Ue,{loading:"initial"}),ke((0,c.resolveAll)([q.ready,We(Ve(Fe).init)],(function(){Me=!0,je(Ue),Fe.emit("ready")})),Ue)}function Je(e,t){(0,c.throwNotFunction)(t),(0,c.definePrototype)(_e,(0,c.kv)((0,c.camel)("use-"+e),(function(n){var r=Ve(this);r.options[e]=(0,c.extend)(r.options[e]||{},n),t(this,r.options[e])})))}(0,c.definePrototype)(_e,{emit:function(e,t,n,r){return(0,c.is)(t,Node)||(r=n,n=t,t=this.element),q.emit(e,t,n,r)},define:function(e){(0,c.define)(this,e)},beforeInit:function(e){(0,c.isFunction)(e)&&(e=e.call(this)),Ve(this).init.push(e)},detect:function(e,t){var n=this,r={};(0,c.each)(e,(function(e,t){Le[t]&&(r[t]=(0,c.isFunction)(Le[t])?Le[t]=(0,c.resolveAll)(Le[t]()).catch((function(e){return console.warn("Detection for "+t+" has thrown exception:",e),!1})):Le[t])})),this.beforeInit((0,c.resolveAll)(r,(function(e){return e=Object.freeze((0,c.extend)(n.supports||{},e)),(0,c.define)(n,{supports:e}),(0,c.isFunction)(t)&&t(e)})))},when:function(e,t){this.beforeInit((0,c.resolveAll)(e,(function(e){if(e)return t()})))},on:function(e,t,n,r){r=!0===(r||n),(0,c.isFunction)(t)&&(n=t,t=e,e=Ue);var o=t;if("string"==typeof t)r&&(n=De(n)),t.indexOf(" ")>=0?(o={},(0,c.each)(t,(function(e,t){o[t]=n}))):o=(0,c.kv)(t,n);else if(r)for(var i in t)t[i]=De(t[i]);if("string"==typeof e){if(function(e,t){ve.push({target:e,handlers:t})}(e,o),!Me)return;e=(0,m.$)(e).get()}else e instanceof Node&&(e=[e]);(0,c.each)(e,(function(e,t){q.on(t,o)}))},matchPath:function(e,t,n){(0,c.isFunction)(t)&&(n=t,t=null),this.on("mounted",(function(r){r.target.getAttribute("match-path")!==e||t&&!(0,m.$)(r.target).is(t)||n.call(r.target,r.target)}))},matchElement:function(e,t){me.push({selector:e,handler:t})},beforeUpdate:function(e){pe.push((0,c.throwNotFunction)(e))},beforePageEnter:function(e){oe.push((0,c.throwNotFunction)(e))}}),(0,c.watchable)(_e.prototype);var Qe=n(668),Be=/localhost:?/i.test(location.host),Ke=q.root,Xe={var:!0,"auto-var":!0,switch:{matched:null},"error-scope":{error:null}},Ye=new Qe.InheritedNodeTree(Ke,(function(){var e=this,t=e.element;t.attributes.var||t.setAttribute("var","");(0,c.each)(t.dataset,(function(t,n){(0,c.defineOwnProperty)(e,t,J.eval("`"+n))})),(0,c.each)(Ze(t,!0,e),(function(t,n){(0,c.defineOwnProperty)(e,t,n)})),t===Ke&&(e.loading=null,e.error=null)}));function Ze(e,t,n){var r={};if((0,c.each)(Xe,(function(t,o){!0===o?(0,c.extend)(r,it(e,t,!1,n)):(0,c.isPlainObject)(o)&&e.attributes[t]&&(0,c.extend)(r,o)})),t)for(var o in r)r[o]=null;return r}function et(e,t){for(var n=rt(t);null!==n;n=Object.getPrototypeOf(n))if((0,c.hasOwnProperty)(n,e))return n.element;return console.warn("Undeclared state: %s",e,{element:t}),t}function tt(e,t,n){var r=!1;if("string"==typeof e)(0,m.$)(e).each((function(e,o){tt(o,t,n)&&(r=!0)}));else{var o=Ye.setNode(e);(0,c.each)(t||it(e,"set-var"),(function(t,n){o[t]!==n&&(o[t]=n,r=!0,Ie(et(t,e)))})),r&&!n&&Me&&Te()}return!!r}function nt(e,t){Ce((function(){(0,c.each)((0,c.selectIncludeSelf)("[var]",e),(function(e,n){tt(n,Ze(n,t))}))}))}function rt(e){return Ye.getNode(e)}function ot(e,t,n,r,o){var i={globals:{app:Fe}},a=o?(0,c.htmlDecode)(J(e,(0,c.extend)({},t),i)):J.eval(e,(0,c.extend)({},t),i);return Be&&ee("eval",[n,r,"→",a],(function(r){r.log("%c%s%c","background-color:azure;color:darkblue;font-weight:bold",e,"","→",a),r.log("Context:",(0,c.extend)({},t)),r.log("Element:",n===Ke?document:n)})),a}function it(e,t,n,r){var o=e.getAttribute(t);return o?ot(o,r||rt(e),e,t,n):n?"":null}q.watchAttributes(Ke,(0,c.keys)(Xe),(function(e){(0,c.each)(e,(function(e,t){Ye.setNode(t)}))}),!0),Ye.on("update",(function(e){(0,c.each)(e.updatedNodes,(function(e,t){Ie(t.element)}))}));var at=new m.Map,ct=new m.Map,ut={};function lt(e,t){ut[e]=(0,c.throwNotFunction)(t)}function st(e,t){(0,m.$)(e||"[is-flyout].open").each((function(e,n){var r=at.get(n);r&&(at.delete(n),r.resolve(t),r.source&&(0,c.setClass)(r.source,"target-opened",!1)),D(n,"show").then((function(){(0,c.setClass)(n,"open",!1)}))}))}function ft(e,t,n,r){var o=n||q.root,i=e?(0,c.selectClosestRelative)(e,o):(0,m.$)(o).closest("[is-flyout]")[0];if(!i)return(0,c.reject)();var a,u=at.get(i);if(u)return r?st(i,n&&J.eval("`"+n.value)):u.path=Fe.path,u.promise;var l=new m.Promise((function(e){a=e}));return at.set(i,{source:n,promise:l,resolve:a,path:Fe.path}),n&&(0,c.setClass)(n,"target-opened",!0),t&&tt(i,t),(0,v.runCSSTransition)(i,"open",(function(){q.focus(i)})),W(i,"open"),i.attributes["is-modal"]&&q.lock(i,l),l}lt("validate",(function(e){var t=(0,c.selectClosestRelative)(this.getAttribute("validate")||"",e.target);if(t){var n=q.emit("validate",t)||!t.checkValidity||t.checkValidity();if(n){if((0,c.isThenable)(n))return n.then((function(e){if(!e)throw"validation-failed"}))}else e.stopImmediatePropagation(),e.preventDefault()}})),lt("context-method",(function(e){var t=e.currentTarget,n=(0,c.camel)(t.getAttribute("context-method")||"");if((0,c.isFunction)(Fe[n])){var r=t.getAttribute("context-form"),o=r?(0,c.selectClosestRelative)(r,t):t.form,i={},a=!0;return o?(a=q.emit("validate",o)||o.checkValidity(),(0,c.extend)(i,S(o))):(0,c.extend)(i,t.dataset),(0,c.resolveAll)(a,(function(e){if(!e)throw"validation-failed";return Fe[n](i)}))}})),q.ready.then((function(){Fe.on("mounted",(function(e){(0,m.$)((0,c.selectIncludeSelf)("["+(0,c.keys)(ut).join("],[")+"]",e.target)).attr("async-action","")})),Fe.on("navigate",(function(){setTimeout((function(){at.forEach((function(e,t){e.path!==Fe.path&&st(t)}))}))})),(0,m.$)("body").on("click","[disabled], .disabled, :disabled",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),(0,m.$)("body").on("click","[async-action]",(function(e){var t=e.currentTarget,n=(0,c.mapGet)(ct,t,Array),r=null;if((0,c.each)(ut,(function(e,o){if(t.attributes[e]&&n.indexOf(o)<0)return r=o,!1})),r){n.push(r);var o=r.call(t,e);(0,c.isThenable)(o)&&!e.isImmediatePropagationStopped()&&(e.stopImmediatePropagation(),e.preventDefault(),ke(o).then((function(){(0,c.dispatchDOMMouseEvent)(e)}),(function(e){ct.delete(t),console.warn("Action threw an error:",e)})))}else ct.delete(t)})),(0,m.$)("body").on("click","a[href]:not([rel]), [data-href]",(function(e){var t=e.currentTarget;if("_blank"!==t.target&&"navigate"in Fe){e.preventDefault(),e.stopPropagation();var n=(0,m.$)(t).closest("[is-modal]")[0];n?(ft(n).then((function(){Fe.navigate(t.getAttribute("data-href")||t.getAttribute("href"))})),st(n)):(Fe.navigate(t.getAttribute("data-href")||t.getAttribute("href")),st())}})),(0,m.$)("body").on("click","[set-var]:not([match-path])",(function(e){var t=e.currentTarget;t===(0,m.$)(e.target).closest("[set-var]")[0]&&(tt(t),st())})),(0,m.$)("body").on("click","[toggle]",(function(e){var t=e.currentTarget;e.stopPropagation(),ft(t.getAttribute("toggle"),null,t,!0)})),(0,m.$)("body").on("click","[toggle-class]",(function(e){e.stopPropagation();var t=e.currentTarget,n=t.getAttribute("toggle-class-for"),r=n?(0,c.selectClosestRelative)(n,t):e.currentTarget;(0,c.each)(t.getAttribute("toggle-class"),(function(e,t){(0,c.setClass)(r,t.slice(1),"+"===t[0])}))})),(0,m.$)("body").on("click",(function(){st()}))})),q.ready.then((function(){(0,m.$)("[brew-template]").each((function(e,t){Ne(t.getAttribute("brew-template")||"",t.cloneNode(!0))})),(0,m.$)("apply-attributes").each((function(e,t){var n=(0,m.$)(t.getAttribute("elements")||"",t.parentNode||q.root);(0,c.each)(t.attributes,(function(e,t){"elements"!==t.name&&n.attr(t.name,t.value)}))})).remove(),(0,m.$)("[style]").each((function(e,t){var n=(0,v.isCssUrlValue)(t.style.backgroundImage);n&&(t.setAttribute("data-bg-src",decodeURIComponent(d(n))),t.style.backgroundImage="none")})),window.onbeforeunload=function(e){Ee(!0)&&(e.returnValue="",e.preventDefault())}}));function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,c.define)(Ge,ht(ht(ht(ht(ht({defaults:B},o),r),i),a),{},{getVar:rt,setVar:tt,evalAttr:it,isElementActive:ae,handleAsync:ke,preventLeave:Ee,install:Je,addDetect:function(e,t){Le[e]=(0,c.throwNotFunction)(t)},addTemplate:Ne}));const pt=Ge;Je("config",(function(e,t){var n=(0,c.watchable)();(0,c.define)(e,{config:n}),e.beforeInit(C(t.path).catch((0,c.isFunction)(t.fallback)||null).then((function(e){(0,c.extend)(n,e),t.freeze&&(0,c.deepFreeze)(n)})))}));B.formVar=!0,Je("formVar",(function(e){e.matchElement("form[form-var]",(function(t){var n=t.getAttribute("form-var"),r={},o=function(e){if(e&&(r=S(t)),n){var o=rt(t)[n],i=(0,c.extend)({},o);for(var a in i)a in r||delete i[a];(0,c.equal)(i,r)||tt(t,(0,c.kv)(n,(0,c.extend)({},o,r)))}else tt(t,r)};q.watchAttributes(t,"value",(function(){(0,c.setImmediateOnce)(o)})),q.watchElements(t,":input",(function(e){(0,c.each)(e,(function(e,n){var r=q.afterDetached(n,t);(0,c.bindUntil)(r,n,"change",(function(){(0,c.setImmediateOnce)(o)})),r.then(o.bind(null,!0))})),o(!0)}),!0),e.on(t,"reset",(function(){return n?ae(et(n,t))||t.reset():(0,c.each)(t.elements,(function(e,n){ae(et(n.name,t))||(n.value=null)})),!0}))})),e.on("pageenter",(function(e){(0,m.$)((0,c.selectIncludeSelf)("form[form-var]",e.target)).each((function(e,t){(0,m.$)(":input:eq(0)",t).trigger("change")}))}))}));function mt(e,t){var n=navigator.languages?[].slice.apply(navigator.languages):[navigator.language||""];return(0,c.each)(n,(function(e,t){if(t.indexOf("-")>0){var r=t.split("-")[0];if(n.indexOf(r)<0)for(var o=n.length-1;o>=0;o--)n[o].split("-")[0]===r&&n.splice(o+1,0,r)}})),e=e||n,(0,c.any)(n,(function(t){return e.indexOf(t)>=0}))||t||e[0]}Je("i18n",(function(e,t){var n=e.route&&t.routeParam,r=t.cookie&&r(t.cookie,864e5),o=n&&e.route[n]||r&&r.get()||mt(t.languages,t.defaultLanguage),i=function(i){t.languages.indexOf(i)<0&&(i=o),e.language=i,r&&r.set(i),n&&(e.route[n]=i),o!==i&&(o=i,t.reloadOnChange&&location.reload())};e.define({language:o,setLanguage:i,detectLanguage:mt}),e.watch("language",i),n&&(e.route.watch(n,i),e.on("ready",(function(){e.route[n]=o})))}));Je("login",(function(e,t){var n=I((t=(0,c.extend)({loginPagePath:"",defaultRedirectPath:"",cookie:"",expiry:0,logout:null,login:null,tokenLogin:null,getTokenFromResponse:null},t)).cookie,t.expiry),r=(0,c.defineObservableProperty)(e,"loggedIn",!1,!0);function o(o){r(!0),(0,c.isFunction)(t.getTokenFromResponse)&&n.set(t.getTokenFromResponse(o)),e.emit("login",{data:o})}var i=e.initialPath,a=n.get();a&&(0,c.isFunction)(t.tokenLogin)&&e.beforeInit((0,c.catchAsync)((0,c.resolveAll)(t.tokenLogin(a),o))),e.define({login:function(n,a,u){return u=(0,c.isFunction)(u||a),a="string"==typeof a&&a,(0,c.resolveAll)(t.login(n)).then((function(e){return o(e),u&&u()}),(function(e){throw r(!1),e.status>=500?"server-error":"incorrect-cred"})).then((function(){i===e.resolvePath(t.loginPagePath)&&(i=""),e.navigate(a||i||t.defaultRedirectPath),i=""}))},logout:function(o,i){return e.loggedIn?(i=(0,c.isFunction)(i||o),o="string"==typeof o&&o,(0,c.resolve)(Ee()).then((function(){return t.logout()})).then((function(){return r(!1),n.delete(),e.emit("logout"),i&&i()})).then((function(){e.navigate(o||t.loginPagePath)}))):(0,c.resolve)()}}),e.on("navigate",(function(n){var r=e.resolvePath(t.loginPagePath);(0,c.either)(e.loggedIn,n.pathname!==r)&&(e.loggedIn?e.navigate(t.defaultRedirectPath):(i=n.pathname,e.navigate(r)))}))}));var vt="background-image".split(" ");B.preloadImage=!0,Je("preloadImage",(function(e){e.beforeUpdate((function(e){var t={};return(0,c.each)(e,(function(e,n){(n.src||n.style)&&ae(e)&&(n.src&&(t[h(n.src)]=!0),n.style&&(0,c.each)(vt,(function(e,r){var o=(0,v.isCssUrlValue)(n.style[r]);o&&(t[h(o)]=!0)})))})),N((0,c.keys)(t),200)})),e.beforePageEnter((function(e){return N(e,1e3)}))}));Je("scrollable",(function(e){var t=window.DOMMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix,n=(0,c.createPrivateStore)(),r=0;function o(e){return n(e)||n(e,{childClass:"scrollable-target-"+ ++r})}function i(){(0,m.$)("[scrollable]:visible").scrollable("refresh")}function a(){(0,m.$)('[animate-on~="scroll-into-view"]:not(.tweening-in):visible').each((function(e,n){var r=new t(getComputedStyle(n).transform),o=(0,c.getRect)(q.root),i=(0,c.getRect)(n);((0,c.rectIntersects)(o,i.translate(-r.e||0,0))||(0,c.rectIntersects)(o,i.translate(0,-r.f||0)))&&W(n,"scroll-into-view")}))}e.on("mounted",(function(t){(0,m.$)((0,c.selectIncludeSelf)("[scrollable-target]",t.target)).each((function(e,t){var n=(0,m.$)(t).closest("[scrollable]")[0];(0,m.$)(t).addClass(o(n).childClass)})),(0,m.$)((0,c.selectIncludeSelf)("[scrollable]",t.target)).each((function(t,n){!function(t){var n,r,i=t.getAttribute("scrollable"),a=t.getAttribute("scroller-snap-page")||"",u=t.getAttribute("scroller-state")||"",l=t.getAttribute("scroller-page")||"",s=l&&(0,m.$)(l,t).get(),f=!1,d=!1;function h(e){if(u){var n={};n[u]=e,tt(t,n)}}function g(e,r){r=r||"center top",!f&&(0,c.isVisible)(t)&&(f=!0,n=!0,h(e),(0,m.$)(t).scrollable("scrollToElement",s[e],r,r,200,(function(){f=!1,n=!1})))}function p(){("always"===a||a===e.orientation)&&(0,c.isVisible)(t)&&(f?d=!0:(d=!1,g(rt(t)[u])))}(0,m.$)(t).scrollable({bounce:!1,handle:(0,c.matchWord)(i,"auto scrollbar content")||"content",hScroll:!(0,c.matchWord)(i,"y-only"),vScroll:!(0,c.matchWord)(i,"x-only"),content:"."+o(t).childClass+":visible:not(.disabled)",pageItem:l,snapToPage:"always"===a||a===e.orientation,scrollbar:!1,scrollStart:function(n){e.emit("scrollStart",t,n,!0)},scrollMove:function(n){e.emit("scrollMove",t,n,!0)},scrollEnd:function(n){e.emit("scrollStop",t,n,!0)}}),l&&("always"!==a&&e.on("orientationchange",(function(){(0,m.$)(t).scrollable("setOptions",{snapToPage:a===e.orientation})})),u&&(e.on(t,{statechange:function(e){var t=e.data[u];f||((0|(0,c.getRect)(s[t]).width)>(0|(0,c.getRect)().width)?g(t,"left center"):g(t))},scrollMove:function(e){f=!0,n||h(e.pageIndex)},scrollStop:function(e){h(e.pageIndex),f=!1,d&&p()}},!0),(0,m.$)(window).on("resize",(function(){clearTimeout(r),r=setTimeout(p,200)}))))}(n)}))})),e.on("statechange orientationchange animationcomplete",(function(){(0,c.setTimeoutOnce)(i)})),e.on("pageenter",(function(e){var t=(0,m.$)((0,c.selectIncludeSelf)("[scrollable]",e.target)).add((0,m.$)(e.target).parents("[scrollable]"));(0,m.$)((0,c.selectIncludeSelf)("[scrollable-target]",e.target)).each((function(e,t){(0,m.$)(t).toggleClass("disabled",!ae(t))})),t.scrollable("refresh"),t.filter(":not([keep-scroll-offset])").scrollable("scrollTo",0,0)})),e.on("resize pageenter statechange scrollMove orientationchange",(function(){(0,c.setTimeoutOnce)(a)}))}));var bt=n(163);B.viewport=!0,Je("viewport",(function(e){var t,n,r,o=(0,c.defineObservableProperty)(e,"orientation","",!0),i=bt.IS_TOUCH&&"MacIntel"!==navigator.platform,a=screen.availWidth,u=screen.availHeight;function l(l){bt.IS_TOUCH&&screen.availWidth===a&&screen.availHeight===u&&screen.availWidth===window.innerWidth?(0,m.$)("body").css("min-height",(0,m.$)("body").height()+"px"):(0,m.$)("body").css("min-height","0"),a=screen.availWidth,u=screen.availHeight;var s=(0,m.$)("body").height()||0;((0,m.$)("html").height()||0)<s&&(0,m.$)(q.activeElement).is(":text")&&(0,c.scrollIntoView)(q.activeElement);var f=t;n=i?a:document.body.offsetWidth,r=i?a===window.innerWidth?u:window.innerHeight:document.body.offsetHeight,o((t=n/r)>=1?"landscape":"portrait"),!1!==l&&(e.emit("resize",{aspectRatio:t,viewportWidth:n,viewportHeight:r}),(0,c.either)(t>=1,f>=1)&&e.emit("orientationchange",{orientation:e.orientation}))}(0,c.define)(e,{get aspectRatio(){return t},get viewportWidth(){return n},get viewportHeight(){return r}}),e.on("orientationchange",(function(){W(q.root,"orientationchange")})),(0,m.$)(window).on("resize",(function(){(0,c.setTimeoutOnce)(l)})),(0,m.$)((function(){l(!1)}))}));const yt=pt},609:function(e){e.exports=i},160:function(e){e.exports=o},229:function(e){e.exports=a},163:function(e){e.exports=u},260:function(e){e.exports=n},50:function(e){e.exports=r},774:function(e){e.exports=t},990:function(t){t.exports=e},668:function(e){e.exports=c}},s={};function f(e){if(s[e])return s[e].exports;var t=s[e]={exports:{}};return l[e](t,t.exports,f),t.exports}return f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,{a:t}),t},f.d=function(e,t){for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f(251)}()}));
//# sourceMappingURL=brew.min.js.map